{"version":3,"file":"index.umd.js","sources":["../../src/md/config.js","../../src/md/device.js","../../src/md/coding.js","../../src/md/useragent.js","../../src/md/utils.js","../../src/md/user_track.js","../../src/md/event_track.js","../../src/md/local_storage.js","../../src/md/spa.js","../../src/md/bpoint_send.js","../../src/md/input_listen.js","../../src/md/index.js"],"sourcesContent":["// 默认配置\r\nconst DEFAULT_CONFIG = {\r\n  // 上报服务器域名配置\r\n  track_url: \"http://localhost:3300/\",\r\n  // debug启动配置\r\n  debug: false,\r\n  // 本地存储配置\r\n  local_storage: {\r\n    // 存储方式  localStorage || cookie\r\n    type: \"localStorage\",\r\n    // 存储名称\r\n    name: \"\",\r\n    // 关闭存储功能\r\n    disable: false,\r\n    // cookie存储时，采用安全的存储方式，即：\r\n    //当secure属性设置为true时，cookie只有在https协议下才能上传到服务器，而在http协议下是没法上传的，所以也不会被窃听\r\n    secure_cookie: false,\r\n    // cookie存储时，跨主域名存储配置\r\n    cross_subdomain_cookie: false,\r\n    // cookie方法存储时，配置保存过期时间\r\n    cookie_expiration: 1000\r\n  },\r\n  // 初始化sdk时触发的方法\r\n  loaded: function() {},\r\n  // 上报数据实现形式  post, get, img\r\n  track_type: \"img\",\r\n  // 单页面应用配置\r\n  SPA: {\r\n    // 开启SPA配置\r\n    is: false,\r\n    // SPA 实现类型，hash || history\r\n    mode: \"hash\"\r\n  },\r\n  // PV指标自动触发配置\r\n  pageview: true,\r\n  // 上报数据前，每个字段长度截取配置，默认不截取\r\n  truncateLength: -1,\r\n  // 会话超时时长，默认30分钟\r\n  session_interval_mins: 30,\r\n  isBpoint: true, // 是否开启断点发送，默认开启\r\n  // 远程拉取可视化圈选插件地址\r\n  auto_visualization_src:\r\n    \"http://localhost:3300/build/plugins/auto_visualization/main.js\",\r\n  stackSize: 10, //信息存储栈大小 栈满 则打包 转存到待发送队列\r\n  stackTime: 3, //信息存储栈时间（单位 秒） 定时扫描，栈有数据就发\r\n\r\n  queueSize: 20, //待发送队列大小\r\n  queueTime: 5 //待发送队列 自动扫描发送时间\r\n};\r\n\r\n// 配置\r\nconst CONFIG = {\r\n  DEBUG: false,\r\n  LIB_VERSION: \"0.1.0\",\r\n  isBpoint: true, // 是否开启断点发送，默认开启\r\n  stackSize: 10, //信息存储栈大小 栈满 则打包 转存到待发送队列\r\n  stackTime: 3, //信息存储栈时间（单位 秒） 定时扫描，栈有数据就发\r\n\r\n  queueSize: 20, //待发送队列大小\r\n  queueTime: 5 //待发送队列 自动扫描发送时间\r\n};\r\n\r\n// 系统事件类型（事件分为：系统事件和业务事件）\r\nconst SYSTEM_EVENT_TYPE = \"se\";\r\n\r\n// 业务事件类型\r\nconst BUSSINESS_EVENT_TYPE = \"be\";\r\n\r\n// 系统事件列表\r\nconst SYSTEM_EVENT_OBJECT = {\r\n  // 会话开始事件\r\n  sxfData_session_start: {\r\n    data_type: SYSTEM_EVENT_TYPE\r\n  },\r\n  // 会话结束事件\r\n  sxfData_session_close: {\r\n    data_type: SYSTEM_EVENT_TYPE\r\n  },\r\n  // PV事件\r\n  sxfData_pv: {\r\n    data_type: SYSTEM_EVENT_TYPE\r\n  },\r\n  // 广告点击事件\r\n  sxfData_ad_click: {\r\n    data_type: SYSTEM_EVENT_TYPE\r\n  },\r\n  // 用户首次访问网站事件\r\n  sxfData_activate: {\r\n    data_type: SYSTEM_EVENT_TYPE\r\n  },\r\n  // A/B 测试事件\r\n  sxfData_abtest: {\r\n    data_type: SYSTEM_EVENT_TYPE\r\n  },\r\n  // 异常错误事件\r\n  sxfData_error: {\r\n    data_type: SYSTEM_EVENT_TYPE\r\n  },\r\n  // 用户注册事件\r\n  sxfData_u_signup: {\r\n    data_type: SYSTEM_EVENT_TYPE\r\n  },\r\n  // 用户登录事件\r\n  sxfData_u_login: {\r\n    data_type: SYSTEM_EVENT_TYPE\r\n  },\r\n  // 用户登出事件\r\n  sxfData_u_logout: {\r\n    data_type: SYSTEM_EVENT_TYPE\r\n  },\r\n  // 用户属性设置事件\r\n  sxfData_u_property: {\r\n    data_type: SYSTEM_EVENT_TYPE\r\n  }\r\n};\r\n\r\n// People类系统保留属性，用户设置这些属性将无法成功\r\nconst PEOPLE_RESERVED_PROPERTY = [\"$deviceUdid\", \"$toekn\"];\r\n\r\n// People类属性事件id，全局唯一\r\nconst PEOPLE_PROPERTY_ID = \"sxfData_user_property\";\r\n\r\n// 渠道推广参数全局配置, 左边sdk内部使用的参数，右边实际url上的参数\r\n// 若url上推广的参数不一致，请修改对应右边的值（一一对应）\r\n// 注意：系统暂时未支持自定义配置（TODO）,若要改动，请到文件 src/channel.js 修改。\r\nconst CHANNEL_PARAMS = {\r\n  // 广告来源(必须字段)\r\n  utm_source: \"utm_source\",\r\n  // 广告媒介(必须字段)\r\n  utm_medium: \"utm_medium\",\r\n  // 广告名称(必须字段)\r\n  utm_campaign: \"utm_campaign\",\r\n  // 广告内容(选填)\r\n  utm_content: \"utm_content\",\r\n  // 广告关键词(选填)\r\n  utm_term: \"utm_term\",\r\n  // 广告id(必须字段)\r\n  promotional_id: \"promotional_id\"\r\n};\r\nexport {\r\n  CONFIG,\r\n  DEFAULT_CONFIG,\r\n  SYSTEM_EVENT_TYPE,\r\n  BUSSINESS_EVENT_TYPE,\r\n  SYSTEM_EVENT_OBJECT,\r\n  PEOPLE_RESERVED_PROPERTY,\r\n  PEOPLE_PROPERTY_ID,\r\n  CHANNEL_PARAMS,\r\n  BPOINT_CONFIG,\r\n  ALLEVENT\r\n};\r\n","\r\n// Save the previous value of the device variable.\r\nvar previousDevice = window.device;\r\n\r\nvar device = {};\r\n\r\nvar changeOrientationList = [];\r\n\r\n// Add device as a global object.\r\nwindow.device = device;\r\n\r\n// The <html> element.\r\nvar documentElement = window.document.documentElement;\r\n\r\n// The client user agent string.\r\n// Lowercase, so we can use the more efficient indexOf(), instead of Regex\r\nvar userAgent = window.navigator.userAgent.toLowerCase();\r\n\r\n// Detectable television devices.\r\nvar television = ['googletv', 'viera', 'smarttv', 'internet.tv', 'netcast', 'nettv', 'appletv', 'boxee', 'kylo', 'roku', 'dlnadoc', 'roku', 'pov_tv', 'hbbtv', 'ce-html'];\r\n\r\n// Main functions\r\n// --------------\r\n\r\ndevice.macos = function () {\r\n  return find('mac');\r\n};\r\n\r\ndevice.ios = function () {\r\n  return device.iphone() || device.ipod() || device.ipad();\r\n};\r\n\r\ndevice.iphone = function () {\r\n  return !device.windows() && find('iphone');\r\n};\r\n\r\ndevice.ipod = function () {\r\n  return find('ipod');\r\n};\r\n\r\ndevice.ipad = function () {\r\n  return find('ipad');\r\n};\r\n\r\ndevice.android = function () {\r\n  return !device.windows() && find('android');\r\n};\r\n\r\ndevice.androidPhone = function () {\r\n  return device.android() && find('mobile');\r\n};\r\n\r\ndevice.androidTablet = function () {\r\n  return device.android() && !find('mobile');\r\n};\r\n\r\ndevice.blackberry = function () {\r\n  return find('blackberry') || find('bb10') || find('rim');\r\n};\r\n\r\ndevice.blackberryPhone = function () {\r\n  return device.blackberry() && !find('tablet');\r\n};\r\n\r\ndevice.blackberryTablet = function () {\r\n  return device.blackberry() && find('tablet');\r\n};\r\n\r\ndevice.windows = function () {\r\n  return find('windows');\r\n};\r\n\r\ndevice.windowsPhone = function () {\r\n  return device.windows() && find('phone');\r\n};\r\n\r\ndevice.windowsTablet = function () {\r\n  return device.windows() && find('touch') && !device.windowsPhone();\r\n};\r\n\r\ndevice.fxos = function () {\r\n  return (find('(mobile') || find('(tablet')) && find(' rv:');\r\n};\r\n\r\ndevice.fxosPhone = function () {\r\n  return device.fxos() && find('mobile');\r\n};\r\n\r\ndevice.fxosTablet = function () {\r\n  return device.fxos() && find('tablet');\r\n};\r\n\r\ndevice.meego = function () {\r\n  return find('meego');\r\n};\r\n\r\ndevice.cordova = function () {\r\n  return window.cordova && location.protocol === 'file:';\r\n};\r\n\r\ndevice.nodeWebkit = function () {\r\n  return typeof (window.process) === 'object';\r\n};\r\n\r\ndevice.mobile = function () {\r\n  return device.androidPhone() || device.iphone() || device.ipod() || device.windowsPhone() || device.blackberryPhone() || device.fxosPhone() || device.meego();\r\n};\r\n\r\ndevice.tablet = function () {\r\n  return device.ipad() || device.androidTablet() || device.blackberryTablet() || device.windowsTablet() || device.fxosTablet();\r\n};\r\n\r\ndevice.desktop = function () {\r\n  return !device.tablet() && !device.mobile();\r\n};\r\n\r\ndevice.television = function () {\r\n  var i = 0;\r\n  while (i < television.length) {\r\n    if (find(television[i])) {\r\n      return true;\r\n    }\r\n    i++;\r\n  }\r\n  return false;\r\n};\r\n\r\ndevice.portrait = function () {\r\n  if (screen.orientation && Object.prototype.hasOwnProperty.call(window, 'onorientationchange')) {\r\n    return screen.orientation.type.includes('portrait');\r\n  }\r\n  return window.innerHeight / window.innerWidth > 1;\r\n};\r\n\r\ndevice.landscape = function () {\r\n  if (screen.orientation && Object.prototype.hasOwnProperty.call(window, 'onorientationchange')) {\r\n    return screen.orientation.type.includes('landscape');\r\n  }\r\n  return window.innerHeight / window.innerWidth < 1;\r\n};\r\n\r\n// Public Utility Functions\r\n// ------------------------\r\n\r\n// Run device.js in noConflict mode,\r\n// returning the device variable to its previous owner.\r\ndevice.noConflict = function () {\r\n  window.device = previousDevice;\r\n  return this;\r\n};\r\n\r\n// Private Utility Functions\r\n// -------------------------\r\n\r\n// Simple UA string search\r\nfunction find(needle) {\r\n  return userAgent.indexOf(needle) !== -1;\r\n}\r\n\r\n// Check if documentElement already has a given class.\r\nfunction hasClass(className) {\r\n  return documentElement.className.match(new RegExp(className, 'i'));\r\n}\r\n\r\n// Add one or more CSS classes to the <html> element.\r\nfunction addClass(className) {\r\n  var currentClassNames = null;\r\n  if (!hasClass(className)) {\r\n    currentClassNames = documentElement.className.replace(/^\\s+|\\s+$/g, '');\r\n    documentElement.className = currentClassNames + ' ' + className;\r\n  }\r\n}\r\n\r\n// Remove single CSS class from the <html> element.\r\nfunction removeClass(className) {\r\n  if (hasClass(className)) {\r\n    documentElement.className = documentElement.className.replace(' ' + className, '');\r\n  }\r\n}\r\n\r\n// HTML Element Handling\r\n// ---------------------\r\n\r\n// Insert the appropriate CSS class based on the _user_agent.\r\n\r\nif (device.ios()) {\r\n  if (device.ipad()) {\r\n    addClass('ios ipad tablet');\r\n  } else if (device.iphone()) {\r\n    addClass('ios iphone mobile');\r\n  } else if (device.ipod()) {\r\n    addClass('ios ipod mobile');\r\n  }\r\n} else if (device.macos()) {\r\n  addClass('macos desktop');\r\n} else if (device.android()) {\r\n  if (device.androidTablet()) {\r\n    addClass('android tablet');\r\n  } else {\r\n    addClass('android mobile');\r\n  }\r\n} else if (device.blackberry()) {\r\n  if (device.blackberryTablet()) {\r\n    addClass('blackberry tablet');\r\n  } else {\r\n    addClass('blackberry mobile');\r\n  }\r\n} else if (device.windows()) {\r\n  if (device.windowsTablet()) {\r\n    addClass('windows tablet');\r\n  } else if (device.windowsPhone()) {\r\n    addClass('windows mobile');\r\n  } else {\r\n    addClass('windows desktop');\r\n  }\r\n} else if (device.fxos()) {\r\n  if (device.fxosTablet()) {\r\n    addClass('fxos tablet');\r\n  } else {\r\n    addClass('fxos mobile');\r\n  }\r\n} else if (device.meego()) {\r\n  addClass('meego mobile');\r\n} else if (device.nodeWebkit()) {\r\n  addClass('node-webkit');\r\n} else if (device.television()) {\r\n  addClass('television');\r\n} else if (device.desktop()) {\r\n  addClass('desktop');\r\n}\r\n\r\nif (device.cordova()) {\r\n  addClass('cordova');\r\n}\r\n\r\n// Orientation Handling\r\n// --------------------\r\n\r\n// Handle device orientation changes.\r\nfunction handleOrientation() {\r\n  if (device.landscape()) {\r\n    removeClass('portrait');\r\n    addClass('landscape');\r\n    walkOnChangeOrientationList('landscape');\r\n  } else {\r\n    removeClass('landscape');\r\n    addClass('portrait');\r\n    walkOnChangeOrientationList('portrait');\r\n  }\r\n  setOrientationCache();\r\n}\r\n\r\nfunction walkOnChangeOrientationList(newOrientation) {\r\n  for (var index in changeOrientationList) {\r\n    changeOrientationList[index](newOrientation);\r\n  }\r\n}\r\n\r\ndevice.onChangeOrientation = function (cb) {\r\n  if (typeof cb == 'function') {\r\n    changeOrientationList.push(cb);\r\n  }\r\n};\r\n\r\n// Detect whether device supports orientationchange event,\r\n// otherwise fall back to the resize event.\r\nvar orientationEvent = 'resize';\r\nif (Object.prototype.hasOwnProperty.call(window, 'onorientationchange')) {\r\n  orientationEvent = 'orientationchange';\r\n}\r\n\r\n// Listen for changes in orientation.\r\nif (window.addEventListener) {\r\n  window.addEventListener(orientationEvent, handleOrientation, false);\r\n} else if (window.attachEvent) {\r\n  window.attachEvent(orientationEvent, handleOrientation);\r\n} else {\r\n  window[orientationEvent] = handleOrientation;\r\n}\r\n\r\nhandleOrientation();\r\n\r\n// Public functions to get the current value of type, os, or orientation\r\n// ---------------------------------------------------------------------\r\n\r\nfunction findMatch(arr) {\r\n  for (var i = 0; i < arr.length; i++) {\r\n    if (device[arr[i]]()) {\r\n      return arr[i];\r\n    }\r\n  }\r\n  return 'unknown';\r\n}\r\n\r\ndevice.type = findMatch(['mobile', 'tablet', 'desktop']);\r\ndevice.os = findMatch(['ios', 'iphone', 'ipad', 'ipod', 'android', 'blackberry', 'windows', 'fxos', 'meego', 'television']);\r\n\r\nfunction setOrientationCache() {\r\n  device.orientation = findMatch(['portrait', 'landscape']);\r\n}\r\n\r\nsetOrientationCache();\r\n\r\nexport default device;","\nconst utf8Encode = function(string) {\n    string = (string + '').replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n\n    var utftext = '',\n        start,\n        end;\n    var stringl = 0,\n        n;\n\n    start = end = 0;\n    stringl = string.length;\n\n    for (n = 0; n < stringl; n++) {\n        var c1 = string.charCodeAt(n);\n        var enc = null;\n\n        if (c1 < 128) {\n            end++;\n        } else if ((c1 > 127) && (c1 < 2048)) {\n            enc = String.fromCharCode((c1 >> 6) | 192, (c1 & 63) | 128);\n        } else {\n            enc = String.fromCharCode((c1 >> 12) | 224, ((c1 >> 6) & 63) | 128, (c1 & 63) | 128);\n        }\n        if (enc !== null) {\n            if (end > start) {\n                utftext += string.substring(start, end);\n            }\n            utftext += enc;\n            start = end = n + 1;\n        }\n    }\n\n    if (end > start) {\n        utftext += string.substring(start, string.length);\n    }\n\n    return utftext;\n};\n\nconst base64Encode = function(data) {\n    var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    var o1, o2, o3, h1, h2, h3, h4, bits, i = 0,\n        ac = 0,\n        enc = '',\n        tmp_arr = [];\n\n    if (!data) {\n        return data;\n    }\n\n    data = utf8Encode(data);\n\n    do { // pack three octets into four hexets\n        o1 = data.charCodeAt(i++);\n        o2 = data.charCodeAt(i++);\n        o3 = data.charCodeAt(i++);\n\n        bits = o1 << 16 | o2 << 8 | o3;\n\n        h1 = bits >> 18 & 0x3f;\n        h2 = bits >> 12 & 0x3f;\n        h3 = bits >> 6 & 0x3f;\n        h4 = bits & 0x3f;\n\n        // use hexets to index into b64, and append result to encoded string\n        tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n    } while (i < data.length);\n\n    enc = tmp_arr.join('');\n\n    switch (data.length % 3) {\n        case 1:\n            enc = enc.slice(0, -2) + '==';\n            break;\n        case 2:\n            enc = enc.slice(0, -1) + '=';\n            break;\n    }\n\n    return enc;\n};\n\nconst sha1 = function(str){\n    \n   /*\n     * A Javascript implementation of the Secure Hash Algorithm, SHA-1, as defined\n     * in FIPS PUB 180-1\n     * Version 2.1-BETA Copyright Paul Johnston 2000 - 2002.\n     * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n     * Distributed under the BSD License\n     * See http://pajhome.org.uk/crypt/md5 for details.\n     */\n    /*\n     * Configurable variables. You may need to tweak these to be compatible with\n     * the server-side, but the defaults work in most cases.\n     */\n    var hexcase = 0; /* hex output format. 0 - lowercase; 1 - uppercase     */\n    var b64pad = \"\"; /* base-64 pad character. \"=\" for strict RFC compliance  */\n    var chrsz = 8; /* bits per input character. 8 - ASCII; 16 - Unicode    */\n    /*\n     * These are the functions you'll usually want to call\n     * They take string arguments and return either hex or base-64 encoded strings\n     */\n    function hex_sha1(s) {\n     return binb2hex(core_sha1(str2binb(s), s.length * chrsz));\n    }\n    function b64_sha1(s) {\n     return binb2b64(core_sha1(str2binb(s), s.length * chrsz));\n    }\n    function str_sha1(s) {\n     return binb2str(core_sha1(str2binb(s), s.length * chrsz));\n    }\n    function hex_hmac_sha1(key, data) {\n     return binb2hex(core_hmac_sha1(key, data));\n    }\n    function b64_hmac_sha1(key, data) {\n     return binb2b64(core_hmac_sha1(key, data));\n    }\n    function str_hmac_sha1(key, data) {\n     return binb2str(core_hmac_sha1(key, data));\n    }\n    /*\n     * Perform a simple self-test to see if the VM is working\n     */\n    function sha1_vm_test() {\n     return hex_sha1(\"abc\") == \"a9993e364706816aba3e25717850c26c9cd0d89d\";\n    }\n    /*\n     * Calculate the SHA-1 of an array of big-endian words, and a bit length\n     */\n    function core_sha1(x, len) {\n     /* append padding */\n     x[len >> 5] |= 0x80 << (24 - len % 32);\n     x[((len + 64 >> 9) << 4) + 15] = len;\n     var w = Array(80);\n     var a = 1732584193;\n     var b = -271733879;\n     var c = -1732584194;\n     var d = 271733878;\n     var e = -1009589776;\n     for (var i = 0; i < x.length; i += 16) {\n      var olda = a;\n      var oldb = b;\n      var oldc = c;\n      var oldd = d;\n      var olde = e;\n      for (var j = 0; j < 80; j++) {\n       if (j < 16) w[j] = x[i + j];\n       else w[j] = rol(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1);\n       var t = safe_add(safe_add(rol(a, 5), sha1_ft(j, b, c, d)), safe_add(safe_add(e, w[j]), sha1_kt(j)));\n       e = d;\n       d = c;\n       c = rol(b, 30);\n       b = a;\n       a = t;\n      }\n      a = safe_add(a, olda);\n      b = safe_add(b, oldb);\n      c = safe_add(c, oldc);\n      d = safe_add(d, oldd);\n      e = safe_add(e, olde);\n     }\n     return Array(a, b, c, d, e);\n    }\n    /*\n     * Perform the appropriate triplet combination function for the current\n     * iteration\n     */\n    function sha1_ft(t, b, c, d) {\n     if (t < 20) return (b & c) | ((~b) & d);\n     if (t < 40) return b ^ c ^ d;\n     if (t < 60) return (b & c) | (b & d) | (c & d);\n     return b ^ c ^ d;\n    }\n    /*\n     * Determine the appropriate additive constant for the current iteration\n     */\n    function sha1_kt(t) {\n     return (t < 20) ? 1518500249 : (t < 40) ? 1859775393 : (t < 60) ? -1894007588 : -899497514;\n    }\n    /*\n     * Calculate the HMAC-SHA1 of a key and some data\n     */\n    function core_hmac_sha1(key, data) {\n     var bkey = str2binb(key);\n     if (bkey.length > 16) bkey = core_sha1(bkey, key.length * chrsz);\n     var ipad = Array(16),\n      opad = Array(16);\n     for (var i = 0; i < 16; i++) {\n      ipad[i] = bkey[i] ^ 0x36363636;\n      opad[i] = bkey[i] ^ 0x5C5C5C5C;\n     }\n     var hash = core_sha1(ipad.concat(str2binb(data)), 512 + data.length * chrsz);\n     return core_sha1(opad.concat(hash), 512 + 160);\n    }\n    /*\n     * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n     * to work around bugs in some JS interpreters.\n     */\n    function safe_add(x, y) {\n     var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n     var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n     return (msw << 16) | (lsw & 0xFFFF);\n    }\n    /*\n     * Bitwise rotate a 32-bit number to the left.\n     */\n    function rol(num, cnt) {\n     return (num << cnt) | (num >>> (32 - cnt));\n    }\n    /*\n     * Convert an 8-bit or 16-bit string to an array of big-endian words\n     * In 8-bit function, characters >255 have their hi-byte silently ignored.\n     */\n    function str2binb(str) {\n     var bin = Array();\n     var mask = (1 << chrsz) - 1;\n     for (var i = 0; i < str.length * chrsz; i += chrsz)\n     bin[i >> 5] |= (str.charCodeAt(i / chrsz) & mask) << (24 - i % 32);\n     return bin;\n    }\n    /*\n     * Convert an array of big-endian words to a string\n     */\n    function binb2str(bin) {\n     var str = \"\";\n     var mask = (1 << chrsz) - 1;\n     for (var i = 0; i < bin.length * 32; i += chrsz)\n     str += String.fromCharCode((bin[i >> 5] >>> (24 - i % 32)) & mask);\n     return str;\n    }\n    /*\n     * Convert an array of big-endian words to a hex string.\n     */\n    function binb2hex(binarray) {\n     var hex_tab = hexcase ? \"0123456789ABCDEF\" : \"0123456789abcdef\";\n     var str = \"\";\n     for (var i = 0; i < binarray.length * 4; i++) {\n      str += hex_tab.charAt((binarray[i >> 2] >> ((3 - i % 4) * 8 + 4)) & 0xF) + hex_tab.charAt((binarray[i >> 2] >> ((3 - i % 4) * 8)) & 0xF);\n     }\n     return str;\n    }\n    /*\n     * Convert an array of big-endian words to a base-64 string\n     */\n    function binb2b64(binarray) {\n     var tab = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n     var str = \"\";\n     for (var i = 0; i < binarray.length * 4; i += 3) {\n      var triplet = (((binarray[i >> 2] >> 8 * (3 - i % 4)) & 0xFF) << 16) | (((binarray[i + 1 >> 2] >> 8 * (3 - (i + 1) % 4)) & 0xFF) << 8) | ((binarray[i + 2 >> 2] >> 8 * (3 - (i + 2) % 4)) & 0xFF);\n      for (var j = 0; j < 4; j++) {\n       if (i * 8 + j * 6 > binarray.length * 32) str += b64pad;\n       else str += tab.charAt((triplet >> 6 * (3 - j)) & 0x3F);\n      }\n     }\n     return str;\n    }\n\n    return hex_sha1(str);\n};\n\nexport {\n  utf8Encode,\n  base64Encode,\n  sha1\n}","// 兼容单元测试环境\r\nlet win;\r\nif (typeof window === \"undefined\") {\r\n  win = {\r\n    navigator: {\r\n      userAgent: \"\"\r\n    },\r\n    location: {\r\n      pathname: \"\",\r\n      href: \"\"\r\n    },\r\n    document: {\r\n      URL: \"\"\r\n    },\r\n    screen: {\r\n      width: \"\",\r\n      height: \"\"\r\n    }\r\n  };\r\n} else {\r\n  win = window;\r\n}\r\n\r\nfunction toString(object) {\r\n  return Object.prototype.toString.call(object);\r\n}\r\n\r\nfunction isObject(object) {\r\n  return toString(object) === \"[object Object]\";\r\n}\r\n\r\nfunction isFunction(object) {\r\n  return toString(object) === \"[object Function]\";\r\n}\r\n\r\nfunction each(object, factory) {\r\n  for (var i = 0, l = object.length; i < l; i++) {\r\n    if (factory.call(object, object[i], i) === false) {\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\nvar NA_VERSION = \"-1\";\r\nvar external = win.external;\r\nvar userAgent = win.navigator.userAgent || \"\";\r\nvar appVersion = win.navigator.appVersion || \"\";\r\nvar vendor = win.navigator.vendor || \"\";\r\nvar detector = {};\r\n\r\nvar re_msie = /\\b(?:msie |ie |trident\\/[0-9].*rv[ :])([0-9.]+)/;\r\nvar re_blackberry_10 = /\\bbb10\\b.+?\\bversion\\/([\\d.]+)/;\r\nvar re_blackberry_6_7 = /\\bblackberry\\b.+\\bversion\\/([\\d.]+)/;\r\nvar re_blackberry_4_5 = /\\bblackberry\\d+\\/([\\d.]+)/;\r\n\r\n// http://zakwu.me/2015/12/15/an-zhuo-shou-ji-uashou-ji/ 参考\r\n// 硬件设备信息识别表达式。\r\n// 使用数组可以按优先级排序。\r\nvar DEVICES = [\r\n  [\r\n    \"nokia\",\r\n    function(ua) {\r\n      // 不能将两个表达式合并，因为可能出现 \"nokia; nokia 960\"\r\n      // 这种情况下会优先识别出 nokia/-1\r\n      if (ua.indexOf(\"nokia \") !== -1) {\r\n        return /\\bnokia ([0-9]+)?/;\r\n      } else {\r\n        return /\\bnokia([a-z0-9]+)?/;\r\n      }\r\n    }\r\n  ],\r\n  // 三星有 Android 和 WP 设备。\r\n  [\r\n    \"samsung\",\r\n    function(ua) {\r\n      if (ua.indexOf(\"samsung\") !== -1) {\r\n        return /\\bsamsung(?:[ \\-](?:sgh|gt|sm))?-([a-z0-9]+)/;\r\n      } else {\r\n        return /\\b(?:sgh|sch|gt|sm)-([a-z0-9]+)/;\r\n      }\r\n    }\r\n  ],\r\n  [\r\n    \"wp\",\r\n    function(ua) {\r\n      return (\r\n        ua.indexOf(\"windows phone \") !== -1 ||\r\n        ua.indexOf(\"xblwp\") !== -1 ||\r\n        ua.indexOf(\"zunewp\") !== -1 ||\r\n        ua.indexOf(\"windows ce\") !== -1\r\n      );\r\n    }\r\n  ],\r\n  [\"pc\", \"windows\"],\r\n  [\"ipad\", \"ipad\"],\r\n  // ipod 规则应置于 iphone 之前。\r\n  [\"ipod\", \"ipod\"],\r\n  [\"iphone\", /\\biphone\\b|\\biph(\\d)/],\r\n  [\"mac\", \"macintosh\"],\r\n  // 小米\r\n  [\"mi\", /\\bmi[ \\-]?([a-z0-9 ]+(?= build|\\)))/],\r\n  // 红米\r\n  [\"hongmi\", /\\bhm\\b|redmi[ \\-]?([a-z0-9]+)/],\r\n  [\"aliyun\", /\\baliyunos\\b(?:[\\-](\\d+))?/],\r\n  [\r\n    \"meizu\",\r\n    function(ua) {\r\n      return ua.indexOf(\"meizu\") >= 0\r\n        ? /\\bmeizu[\\/ ]([a-z0-9]+)\\b/\r\n        : /\\bm([0-9cx]{1,4})\\b/;\r\n    }\r\n  ],\r\n  [\"nexus\", /\\bnexus ([0-9s.]+)/],\r\n  [\r\n    \"huawei\",\r\n    function(ua) {\r\n      var re_mediapad = /\\bmediapad (.+?)(?= build\\/huaweimediapad\\b)/;\r\n      if (ua.indexOf(\"huawei-huawei\") !== -1) {\r\n        return /\\bhuawei\\-huawei\\-([a-z0-9\\-]+)/;\r\n      } else if (re_mediapad.test(ua)) {\r\n        return re_mediapad;\r\n      } else {\r\n        return /\\bhuawei[ _\\-]?([a-z0-9]+)/;\r\n      }\r\n    }\r\n  ],\r\n  [\r\n    \"lenovo\",\r\n    function(ua) {\r\n      if (ua.indexOf(\"lenovo-lenovo\") !== -1) {\r\n        return /\\blenovo\\-lenovo[ \\-]([a-z0-9]+)/;\r\n      } else {\r\n        return /\\blenovo[ \\-]?([a-z0-9]+)/;\r\n      }\r\n    }\r\n  ],\r\n  // 中兴\r\n  [\r\n    \"zte\",\r\n    function(ua) {\r\n      if (/\\bzte\\-[tu]/.test(ua)) {\r\n        return /\\bzte-[tu][ _\\-]?([a-su-z0-9\\+]+)/;\r\n      } else {\r\n        return /\\bzte[ _\\-]?([a-su-z0-9\\+]+)/;\r\n      }\r\n    }\r\n  ],\r\n  // 步步高\r\n  [\"vivo\", /\\bvivo(?: ([a-z0-9]+))?/],\r\n  [\r\n    \"htc\",\r\n    function(ua) {\r\n      if (/\\bhtc[a-z0-9 _\\-]+(?= build\\b)/.test(ua)) {\r\n        return /\\bhtc[ _\\-]?([a-z0-9 ]+(?= build))/;\r\n      } else {\r\n        return /\\bhtc[ _\\-]?([a-z0-9 ]+)/;\r\n      }\r\n    }\r\n  ],\r\n  [\"oppo\", /\\boppo[_]([a-z0-9]+)/],\r\n  [\"konka\", /\\bkonka[_\\-]([a-z0-9]+)/],\r\n  [\"sonyericsson\", /\\bmt([a-z0-9]+)/],\r\n  [\"coolpad\", /\\bcoolpad[_ ]?([a-z0-9]+)/],\r\n  [\"lg\", /\\blg[\\-]([a-z0-9]+)/],\r\n  [\"android\", /\\bandroid\\b|\\badr\\b/],\r\n  [\r\n    \"blackberry\",\r\n    function(ua) {\r\n      if (ua.indexOf(\"blackberry\") >= 0) {\r\n        return /\\bblackberry\\s?(\\d+)/;\r\n      }\r\n      return \"bb10\";\r\n    }\r\n  ]\r\n];\r\n// 操作系统信息识别表达式\r\nvar OS = [\r\n  [\r\n    \"wp\",\r\n    function(ua) {\r\n      if (ua.indexOf(\"windows phone \") !== -1) {\r\n        return /\\bwindows phone (?:os )?([0-9.]+)/;\r\n      } else if (ua.indexOf(\"xblwp\") !== -1) {\r\n        return /\\bxblwp([0-9.]+)/;\r\n      } else if (ua.indexOf(\"zunewp\") !== -1) {\r\n        return /\\bzunewp([0-9.]+)/;\r\n      }\r\n      return \"windows phone\";\r\n    }\r\n  ],\r\n  [\"windows\", /\\bwindows nt ([0-9.]+)/],\r\n  [\"macosx\", /\\bmac os x ([0-9._]+)/],\r\n  [\r\n    \"iOS\",\r\n    function(ua) {\r\n      if (/\\bcpu(?: iphone)? os /.test(ua)) {\r\n        return /\\bcpu(?: iphone)? os ([0-9._]+)/;\r\n      } else if (ua.indexOf(\"iph os \") !== -1) {\r\n        return /\\biph os ([0-9_]+)/;\r\n      } else {\r\n        return /\\bios\\b/;\r\n      }\r\n    }\r\n  ],\r\n  [\"yunos\", /\\baliyunos ([0-9.]+)/],\r\n  [\r\n    \"Android\",\r\n    function(ua) {\r\n      if (ua.indexOf(\"android\") >= 0) {\r\n        return /\\bandroid[ \\/-]?([0-9.x]+)?/;\r\n      } else if (ua.indexOf(\"adr\") >= 0) {\r\n        if (ua.indexOf(\"mqqbrowser\") >= 0) {\r\n          return /\\badr[ ]\\(linux; u; ([0-9.]+)?/;\r\n        } else {\r\n          return /\\badr(?:[ ]([0-9.]+))?/;\r\n        }\r\n      }\r\n      return \"android\";\r\n      //return /\\b(?:android|\\badr)(?:[\\/\\- ](?:\\(linux; u; )?)?([0-9.x]+)?/;\r\n    }\r\n  ],\r\n  [\"chromeos\", /\\bcros i686 ([0-9.]+)/],\r\n  [\"linux\", \"linux\"],\r\n  [\"windowsce\", /\\bwindows ce(?: ([0-9.]+))?/],\r\n  [\"symbian\", /\\bsymbian(?:os)?\\/([0-9.]+)/],\r\n  [\r\n    \"blackberry\",\r\n    function(ua) {\r\n      var m =\r\n        ua.match(re_blackberry_10) ||\r\n        ua.match(re_blackberry_6_7) ||\r\n        ua.match(re_blackberry_4_5);\r\n      return m ? { version: m[1] } : \"blackberry\";\r\n    }\r\n  ]\r\n];\r\n//浏览器内核\r\nvar ENGINE = [\r\n  [\"edgehtml\", /edge\\/([0-9.]+)/],\r\n  [\"trident\", re_msie],\r\n  [\r\n    \"blink\",\r\n    function() {\r\n      return \"chrome\" in win && \"CSS\" in win && /\\bapplewebkit[\\/]?([0-9.+]+)/;\r\n    }\r\n  ],\r\n  [\"webkit\", /\\bapplewebkit[\\/]?([0-9.+]+)/],\r\n  [\r\n    \"gecko\",\r\n    function(ua) {\r\n      var match;\r\n      if ((match = ua.match(/\\brv:([\\d\\w.]+).*\\bgecko\\/(\\d+)/))) {\r\n        return {\r\n          version: match[1] + \".\" + match[2]\r\n        };\r\n      }\r\n    }\r\n  ],\r\n  [\"presto\", /\\bpresto\\/([0-9.]+)/],\r\n  [\"androidwebkit\", /\\bandroidwebkit\\/([0-9.]+)/],\r\n  [\"coolpadwebkit\", /\\bcoolpadwebkit\\/([0-9.]+)/],\r\n  [\"u2\", /\\bu2\\/([0-9.]+)/],\r\n  [\"u3\", /\\bu3\\/([0-9.]+)/]\r\n];\r\nvar BROWSER = [\r\n  // Microsoft Edge Browser, Default browser in Windows 10.\r\n  [\"edge\", /edge\\/([0-9.]+)/],\r\n  // Sogou.\r\n  [\r\n    \"sogou\",\r\n    function(ua) {\r\n      if (ua.indexOf(\"sogoumobilebrowser\") >= 0) {\r\n        return /sogoumobilebrowser\\/([0-9.]+)/;\r\n      } else if (ua.indexOf(\"sogoumse\") >= 0) {\r\n        return true;\r\n      }\r\n      return / se ([0-9.x]+)/;\r\n    }\r\n  ],\r\n  // TheWorld (世界之窗)\r\n  // 由于裙带关系，TheWorld API 与 360 高度重合。\r\n  // 只能通过 UA 和程序安装路径中的应用程序名来区分。\r\n  // TheWorld 的 UA 比 360 更靠谱，所有将 TheWorld 的规则放置到 360 之前。\r\n  [\r\n    \"theworld\",\r\n    function() {\r\n      var x = checkTW360External(\"theworld\");\r\n      if (typeof x !== \"undefined\") {\r\n        return x;\r\n      }\r\n      return \"theworld\";\r\n    }\r\n  ],\r\n  // 360SE, 360EE.\r\n  [\r\n    \"360\",\r\n    function(ua) {\r\n      var x = checkTW360External(\"360se\");\r\n      if (typeof x !== \"undefined\") {\r\n        return x;\r\n      }\r\n      if (ua.indexOf(\"360 aphone browser\") !== -1) {\r\n        return /\\b360 aphone browser \\(([^\\)]+)\\)/;\r\n      }\r\n      return /\\b360(?:se|ee|chrome|browser)\\b/;\r\n    }\r\n  ],\r\n  // Maxthon\r\n  [\r\n    \"maxthon\",\r\n    function() {\r\n      try {\r\n        if (external && (external.mxVersion || external.max_version)) {\r\n          return {\r\n            version: external.mxVersion || external.max_version\r\n          };\r\n        }\r\n      } catch (ex) {\r\n        /* */\r\n      }\r\n      return /\\b(?:maxthon|mxbrowser)(?:[ \\/]([0-9.]+))?/;\r\n    }\r\n  ],\r\n  [\"micromessenger\", /\\bmicromessenger\\/([\\d.]+)/],\r\n  [\"qq\", /\\bm?qqbrowser\\/([0-9.]+)/],\r\n  [\"green\", \"greenbrowser\"],\r\n  [\"tt\", /\\btencenttraveler ([0-9.]+)/],\r\n  [\r\n    \"liebao\",\r\n    function(ua) {\r\n      if (ua.indexOf(\"liebaofast\") >= 0) {\r\n        return /\\bliebaofast\\/([0-9.]+)/;\r\n      }\r\n      if (ua.indexOf(\"lbbrowser\") === -1) {\r\n        return false;\r\n      }\r\n      var version;\r\n      try {\r\n        if (external && external.LiebaoGetVersion) {\r\n          version = external.LiebaoGetVersion();\r\n        }\r\n      } catch (ex) {\r\n        /* */\r\n      }\r\n      return {\r\n        version: version || NA_VERSION\r\n      };\r\n    }\r\n  ],\r\n  [\"tao\", /\\btaobrowser\\/([0-9.]+)/],\r\n  [\"coolnovo\", /\\bcoolnovo\\/([0-9.]+)/],\r\n  [\"saayaa\", \"saayaa\"],\r\n  // 有基于 Chromniun 的急速模式和基于 IE 的兼容模式。必须在 IE 的规则之前。\r\n  [\"baidu\", /\\b(?:ba?idubrowser|baiduhd)[ \\/]([0-9.x]+)/],\r\n  // 后面会做修复版本号，这里只要能识别是 IE 即可。\r\n  [\"ie\", re_msie],\r\n  [\"mi\", /\\bmiuibrowser\\/([0-9.]+)/],\r\n  // Opera 15 之后开始使用 Chromniun 内核，需要放在 Chrome 的规则之前。\r\n  [\r\n    \"opera\",\r\n    function(ua) {\r\n      var re_opera_old = /\\bopera.+version\\/([0-9.ab]+)/;\r\n      var re_opera_new = /\\bopr\\/([0-9.]+)/;\r\n      return re_opera_old.test(ua) ? re_opera_old : re_opera_new;\r\n    }\r\n  ],\r\n  [\"oupeng\", /\\boupeng\\/([0-9.]+)/],\r\n  [\"yandex\", /yabrowser\\/([0-9.]+)/],\r\n  // 支付宝手机客户端\r\n  [\r\n    \"ali-ap\",\r\n    function(ua) {\r\n      if (ua.indexOf(\"aliapp\") > 0) {\r\n        return /\\baliapp\\(ap\\/([0-9.]+)\\)/;\r\n      } else {\r\n        return /\\balipayclient\\/([0-9.]+)\\b/;\r\n      }\r\n    }\r\n  ],\r\n  // 支付宝平板客户端\r\n  [\"ali-ap-pd\", /\\baliapp\\(ap-pd\\/([0-9.]+)\\)/],\r\n  // 支付宝商户客户端\r\n  [\"ali-am\", /\\baliapp\\(am\\/([0-9.]+)\\)/],\r\n  // 淘宝手机客户端\r\n  [\"ali-tb\", /\\baliapp\\(tb\\/([0-9.]+)\\)/],\r\n  // 淘宝平板客户端\r\n  [\"ali-tb-pd\", /\\baliapp\\(tb-pd\\/([0-9.]+)\\)/],\r\n  // 天猫手机客户端\r\n  [\"ali-tm\", /\\baliapp\\(tm\\/([0-9.]+)\\)/],\r\n  // 天猫平板客户端\r\n  [\"ali-tm-pd\", /\\baliapp\\(tm-pd\\/([0-9.]+)\\)/],\r\n  // UC 浏览器，可能会被识别为 Android 浏览器，规则需要前置。\r\n  // UC 桌面版浏览器携带 Chrome 信息，需要放在 Chrome 之前。\r\n  [\r\n    \"uc\",\r\n    function(ua) {\r\n      if (ua.indexOf(\"ucbrowser/\") >= 0) {\r\n        return /\\bucbrowser\\/([0-9.]+)/;\r\n      } else if (ua.indexOf(\"ubrowser/\") >= 0) {\r\n        return /\\bubrowser\\/([0-9.]+)/;\r\n      } else if (/\\buc\\/[0-9]/.test(ua)) {\r\n        return /\\buc\\/([0-9.]+)/;\r\n      } else if (ua.indexOf(\"ucweb\") >= 0) {\r\n        // `ucweb/2.0` is compony info.\r\n        // `UCWEB8.7.2.214/145/800` is browser info.\r\n        return /\\bucweb([0-9.]+)?/;\r\n      } else {\r\n        return /\\b(?:ucbrowser|uc)\\b/;\r\n      }\r\n    }\r\n  ],\r\n  [\"chrome\", / (?:chrome|crios|crmo)\\/([0-9.]+)/],\r\n  // Android 默认浏览器。该规则需要在 safari 之前。\r\n  [\r\n    \"android\",\r\n    function(ua) {\r\n      if (ua.indexOf(\"android\") === -1) {\r\n        return;\r\n      }\r\n      return /\\bversion\\/([0-9.]+(?: beta)?)/;\r\n    }\r\n  ],\r\n  [\r\n    \"blackberry\",\r\n    function(ua) {\r\n      var m =\r\n        ua.match(re_blackberry_10) ||\r\n        ua.match(re_blackberry_6_7) ||\r\n        ua.match(re_blackberry_4_5);\r\n      return m ? { version: m[1] } : \"blackberry\";\r\n    }\r\n  ],\r\n  [\r\n    \"safari\",\r\n    /\\bversion\\/([0-9.]+(?: beta)?)(?: mobile(?:\\/[a-z0-9]+)?)? safari\\//\r\n  ],\r\n  // 如果不能被识别为 Safari，则猜测是 WebView。\r\n  [\"webview\", /\\bcpu(?: iphone)? os (?:[0-9._]+).+\\bapplewebkit\\b/],\r\n  [\"firefox\", /\\bfirefox\\/([0-9.ab]+)/],\r\n  [\"nokia\", /\\bnokiabrowser\\/([0-9.]+)/]\r\n];\r\n// 针对同源的 TheWorld 和 360 的 external 对象进行检测。\r\n// @param {String} key, 关键字，用于检测浏览器的安装路径中出现的关键字。\r\n// @return {Undefined,Boolean,Object} 返回 undefined 或 false 表示检测未命中。\r\nfunction checkTW360External(key) {\r\n  if (!external) {\r\n    return;\r\n  } // return undefined.\r\n  try {\r\n    //        360安装路径：\r\n    //        C:%5CPROGRA~1%5C360%5C360se3%5C360SE.exe\r\n    var runpath = external.twGetRunPath.toLowerCase();\r\n    // 360SE 3.x ~ 5.x support.\r\n    // 暴露的 external.twGetVersion 和 external.twGetSecurityID 均为 undefined。\r\n    // 因此只能用 try/catch 而无法使用特性判断。\r\n    var security = external.twGetSecurityID(win);\r\n    var version = external.twGetVersion(security);\r\n\r\n    if (runpath && runpath.indexOf(key) === -1) {\r\n      return false;\r\n    }\r\n    if (version) {\r\n      return { version: version };\r\n    }\r\n  } catch (ex) {\r\n    /* */\r\n  }\r\n}\r\n// 解析使用 Trident 内核的浏览器的 `浏览器模式` 和 `文档模式` 信息。\r\n// @param {String} ua, userAgent string.\r\n// @return {Object}\r\nfunction IEMode(ua) {\r\n  if (!re_msie.test(ua)) {\r\n    return null;\r\n  }\r\n\r\n  var m, engineMode, engineVersion, browserMode, browserVersion;\r\n\r\n  // IE8 及其以上提供有 Trident 信息，\r\n  // 默认的兼容模式，UA 中 Trident 版本不发生变化。\r\n  if (ua.indexOf(\"trident/\") !== -1) {\r\n    m = /\\btrident\\/([0-9.]+)/.exec(ua);\r\n    if (m && m.length >= 2) {\r\n      // 真实引擎版本。\r\n      engineVersion = m[1];\r\n      var v_version = m[1].split(\".\");\r\n      v_version[0] = parseInt(v_version[0], 10) + 4;\r\n      browserVersion = v_version.join(\".\");\r\n    }\r\n  }\r\n\r\n  m = re_msie.exec(ua);\r\n  browserMode = m[1];\r\n  var v_mode = m[1].split(\".\");\r\n  if (typeof browserVersion === \"undefined\") {\r\n    browserVersion = browserMode;\r\n  }\r\n  v_mode[0] = parseInt(v_mode[0], 10) - 4;\r\n  engineMode = v_mode.join(\".\");\r\n  if (typeof engineVersion === \"undefined\") {\r\n    engineVersion = engineMode;\r\n  }\r\n\r\n  return {\r\n    browserVersion: browserVersion,\r\n    browserMode: browserMode,\r\n    engineVersion: engineVersion,\r\n    engineMode: engineMode,\r\n    compatible: engineVersion !== engineMode\r\n  };\r\n}\r\n// UserAgent Detector.\r\n// @param {String} ua, userAgent.\r\n// @param {Object} expression\r\n// @return {Object}\r\n//    返回 null 表示当前表达式未匹配成功。\r\nfunction detect(name, expression, ua) {\r\n  var expr = isFunction(expression) ? expression.call(null, ua) : expression;\r\n  if (!expr) {\r\n    return null;\r\n  }\r\n  var info = {\r\n    name: name,\r\n    version: NA_VERSION,\r\n    codename: \"\"\r\n  };\r\n  var t = toString(expr);\r\n  if (expr === true) {\r\n    return info;\r\n  } else if (t === \"[object String]\") {\r\n    if (ua.indexOf(expr) !== -1) {\r\n      return info;\r\n    }\r\n  } else if (isObject(expr)) {\r\n    // Object\r\n    if (expr.hasOwnProperty(\"version\")) {\r\n      info.version = expr.version;\r\n    }\r\n    return info;\r\n  } else if (expr.exec) {\r\n    // RegExp\r\n    var m = expr.exec(ua);\r\n    if (m) {\r\n      if (m.length >= 2 && m[1]) {\r\n        info.version = m[1].replace(/_/g, \".\");\r\n      } else {\r\n        info.version = NA_VERSION;\r\n      }\r\n      return info;\r\n    }\r\n  }\r\n}\r\n\r\nvar na = { name: \"\", version: \"\" };\r\n// 初始化识别。\r\nfunction init(ua, patterns, factory, detector) {\r\n  var detected = na;\r\n  each(patterns, function(pattern) {\r\n    var d = detect(pattern[0], pattern[1], ua);\r\n    if (d) {\r\n      detected = d;\r\n      return false;\r\n    }\r\n  });\r\n  factory.call(detector, detected.name, detected.version);\r\n}\r\n// 解析 UserAgent 字符串\r\n// @param {String} ua, userAgent string.\r\n// @return {Object}\r\nvar parse = function(ua) {\r\n  ua = (ua || \"\").toLowerCase();\r\n  var d = {};\r\n\r\n  init(\r\n    ua,\r\n    DEVICES,\r\n    function(name, version) {\r\n      var v = parseFloat(version);\r\n      d.device = {\r\n        name: name,\r\n        version: v,\r\n        fullVersion: version\r\n      };\r\n      d.device[name] = v;\r\n    },\r\n    d\r\n  );\r\n\r\n  init(\r\n    ua,\r\n    OS,\r\n    function(name, version) {\r\n      var v = parseFloat(version);\r\n      d.os = {\r\n        name: name,\r\n        version: v,\r\n        fullVersion: version\r\n      };\r\n      d.os[name] = v;\r\n    },\r\n    d\r\n  );\r\n\r\n  var ieCore = IEMode(ua);\r\n\r\n  init(\r\n    ua,\r\n    ENGINE,\r\n    function(name, version) {\r\n      var mode = version;\r\n      // IE 内核的浏览器，修复版本号及兼容模式。\r\n      if (ieCore) {\r\n        version = ieCore.engineVersion || ieCore.engineMode;\r\n        mode = ieCore.engineMode;\r\n      }\r\n      var v = parseFloat(version);\r\n      d.engine = {\r\n        name: name,\r\n        version: v,\r\n        fullVersion: version,\r\n        mode: parseFloat(mode),\r\n        fullMode: mode,\r\n        compatible: ieCore ? ieCore.compatible : false\r\n      };\r\n      d.engine[name] = v;\r\n    },\r\n    d\r\n  );\r\n\r\n  init(\r\n    ua,\r\n    BROWSER,\r\n    function(name, version) {\r\n      var mode = version;\r\n      // IE 内核的浏览器，修复浏览器版本及兼容模式。\r\n      if (ieCore) {\r\n        // 仅修改 IE 浏览器的版本，其他 IE 内核的版本不修改。\r\n        if (name === \"ie\") {\r\n          version = ieCore.browserVersion;\r\n        }\r\n        mode = ieCore.browserMode;\r\n      }\r\n      var v = parseFloat(version);\r\n      d.browser = {\r\n        name: name,\r\n        version: v,\r\n        fullVersion: version,\r\n        mode: parseFloat(mode),\r\n        fullMode: mode,\r\n        compatible: ieCore ? ieCore.compatible : false\r\n      };\r\n      d.browser[name] = v;\r\n    },\r\n    d\r\n  );\r\n  return d;\r\n};\r\n\r\ndetector = parse(userAgent + \" \" + appVersion + \" \" + vendor);\r\n\r\nexport default detector;\r\n","import { CONFIG,ALLEVENT } from \"./config\";\r\n\r\nimport device from \"./device\";\r\n\r\nimport { base64Encode } from \"./coding\";\r\n\r\nimport detector from \"./useragent\";\r\nvar ArrayProto = Array.prototype,\r\n  FuncProto = Function.prototype,\r\n  slice = ArrayProto.slice;\r\nvar nativeBind = FuncProto.bind;\r\n// 兼容单元测试环境\r\nlet win;\r\nif (typeof window === \"undefined\") {\r\n  win = {\r\n    navigator: {\r\n      userAgent: \"\"\r\n    },\r\n    location: {\r\n      pathname: \"\",\r\n      href: \"\"\r\n    },\r\n    document: {\r\n      URL: \"\"\r\n    },\r\n    screen: {\r\n      width: \"\",\r\n      height: \"\"\r\n    }\r\n  };\r\n} else {\r\n  win = window;\r\n}\r\n\r\nconst breaker = {};\r\n\r\nconst _ = {\r\n  each(obj, iterator, context) {\r\n    if (obj === null || obj === undefined) {\r\n      return;\r\n    }\r\n    if (Array.prototype.forEach && obj.forEach === Array.prototype.forEach) {\r\n      obj.forEach(iterator, context);\r\n    } else if (obj.length === +obj.length) {\r\n      for (let i = 0, l = obj.length; i < l; i++) {\r\n        if (i in obj && iterator.call(context, obj[i], i, obj) === breaker) {\r\n          return;\r\n        }\r\n      }\r\n    } else {\r\n      for (let key in obj) {\r\n        if (obj.hasOwnProperty.call(obj, key)) {\r\n          if (iterator.call(context, obj[key], key, obj) === breaker) {\r\n            return;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  extend(obj) {\r\n    _.each(Array.prototype.slice.call(arguments, 1), function(source) {\r\n      for (let prop in source) {\r\n        if (source[prop] !== void 0) {\r\n          obj[prop] = source[prop];\r\n        }\r\n      }\r\n    });\r\n    return obj;\r\n  },\r\n  isObject(obj) {\r\n    return obj === Object(obj) && !_.isArray(obj);\r\n  },\r\n  isUndefined(obj) {\r\n    return obj === void 0;\r\n  },\r\n  isArguments(obj) {\r\n    return !!(obj && hasOwnProperty.call(obj, \"callee\"));\r\n  },\r\n  toArray(iterable) {\r\n    if (!iterable) {\r\n      return [];\r\n    }\r\n    if (iterable.toArray) {\r\n      return iterable.toArray();\r\n    }\r\n    if (_.isArray(iterable)) {\r\n      return Array.prototype.slice.call(iterable);\r\n    }\r\n    if (_.isArguments(iterable)) {\r\n      return Array.prototype.slice.call(iterable);\r\n    }\r\n    return _.values(iterable);\r\n  },\r\n  values(obj) {\r\n    var results = [];\r\n    if (obj === null) {\r\n      return results;\r\n    }\r\n    _.each(obj, function(value) {\r\n      results[results.length] = value;\r\n    });\r\n    return results;\r\n  },\r\n  // 转化成json\r\n  JSONDecode(string) {\r\n    try {\r\n      return JSON.parse(string);\r\n    } catch (error) {\r\n      return {};\r\n    }\r\n  },\r\n  // json转化为string\r\n  JSONEncode(json) {\r\n    try {\r\n      return JSON.stringify(json);\r\n    } catch (error) {\r\n      return \"\";\r\n    }\r\n  },\r\n  // 判断类型是否为function\r\n  isFunction(fn) {\r\n    let bool = false;\r\n    if (typeof fn === \"function\") {\r\n      bool = true;\r\n    }\r\n    return bool;\r\n  },\r\n  base64Encode(str) {\r\n    return base64Encode(str);\r\n  },\r\n  sha1(str) {\r\n    return \"\";\r\n  },\r\n  // 对象的字段值截取\r\n  truncate(obj, length) {\r\n    let ret;\r\n    if (typeof obj === \"string\") {\r\n      ret = obj.slice(0, length);\r\n    } else if (_.isArray(obj)) {\r\n      ret = [];\r\n      _.each(obj, function(val) {\r\n        ret.push(_.truncate(val, length));\r\n      });\r\n    } else if (_.isObject(obj)) {\r\n      ret = {};\r\n      _.each(obj, function(val, key) {\r\n        ret[key] = _.truncate(val, length);\r\n      });\r\n    } else {\r\n      ret = obj;\r\n    }\r\n    return ret;\r\n  },\r\n  isNumber(obj) {\r\n    return Object.prototype.toString.call(obj) == \"[object Number]\";\r\n  },\r\n  isString(str) {\r\n    return Object.prototype.toString.call(str) == \"[object String]\";\r\n  },\r\n  HTTPBuildQuery(formdata, arg_separator) {\r\n    let use_val,\r\n      use_key,\r\n      tmp_arr = [];\r\n\r\n    if (_.isUndefined(arg_separator)) {\r\n      arg_separator = \"&\";\r\n    }\r\n\r\n    _.each(formdata, function(val, key) {\r\n      use_val = encodeURIComponent(val && val.toString());\r\n      use_key = encodeURIComponent(key);\r\n      tmp_arr[tmp_arr.length] = use_key + \"=\" + use_val;\r\n    });\r\n\r\n    return tmp_arr.join(arg_separator);\r\n  },\r\n  // 删除左右两端的空格\r\n  trim(str) {\r\n    if (!str) return;\r\n    return str.replace(/(^\\s*)|(\\s*$)/g, \"\");\r\n  },\r\n  // 验证yyyy-MM-dd日期格式\r\n  checkTime(timeString) {\r\n    const reg = /^(\\d{4})-(\\d{2})-(\\d{2})$/;\r\n    if (timeString) {\r\n      if (!reg.test(timeString)) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  },\r\n  // 返回指定url的域名\r\n  // 若不传入url，返回当前网页的域名\r\n  getHost(url) {\r\n    let host = \"\";\r\n    if (!url) {\r\n      url = document.URL;\r\n    }\r\n    const regex = /.*\\:\\/\\/([^\\/]*).*/;\r\n    const match = url.match(regex);\r\n    if (match) {\r\n      host = match[1];\r\n    }\r\n    return host;\r\n  },\r\n  // 获取url上指定参数的值\r\n  getQueryParam(url, param) {\r\n    const target = param.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\r\n    const regexS = \"[\\\\?&]\" + target + \"=([^&#]*)\";\r\n    const regex = new RegExp(regexS);\r\n    const results = regex.exec(url);\r\n    if (\r\n      results === null ||\r\n      (results && typeof results[1] !== \"string\" && results[1].length)\r\n    ) {\r\n      return \"\";\r\n    } else {\r\n      return decodeURIComponent(results[1]).replace(/\\+/g, \" \");\r\n    }\r\n  },\r\n  // 删除对象中空字段\r\n  deleteEmptyProperty(obj) {\r\n    if (!this.isObject(obj)) {\r\n      return;\r\n    }\r\n    for (let key in obj) {\r\n      if (obj.hasOwnProperty(key)) {\r\n        if (\r\n          obj[key] === null ||\r\n          this.isUndefined(obj[key]) ||\r\n          obj[key] === \"\"\r\n        ) {\r\n          delete obj[key];\r\n        }\r\n      }\r\n    }\r\n    return obj;\r\n  }\r\n};\r\n_.isArray =\r\n  Array.isArray ||\r\n  function(obj) {\r\n    return Object.prototype.toString.apply(obj) === \"[object Array]\";\r\n  };\r\n\r\n_.loadScript = function(para) {\r\n  para = _.extend(\r\n    {\r\n      success: function() {},\r\n      error: function() {},\r\n      appendCall: function(g) {\r\n        document.getElementsByTagName(\"head\")[0].appendChild(g);\r\n      }\r\n    },\r\n    para\r\n  );\r\n\r\n  var g = null;\r\n  if (para.type === \"css\") {\r\n    g = document.createElement(\"link\");\r\n    g.rel = \"stylesheet\";\r\n    g.href = para.url;\r\n  }\r\n  if (para.type === \"js\") {\r\n    g = document.createElement(\"script\");\r\n    g.async = \"async\";\r\n    g.setAttribute(\"charset\", \"UTF-8\");\r\n    g.src = para.url;\r\n    g.type = \"text/javascript\";\r\n  }\r\n  g.onload = g.onreadystatechange = function() {\r\n    if (\r\n      !this.readyState ||\r\n      this.readyState === \"loaded\" ||\r\n      this.readyState === \"complete\"\r\n    ) {\r\n      para.success();\r\n      g.onload = g.onreadystatechange = null;\r\n    }\r\n  };\r\n  g.onerror = function() {\r\n    para.error();\r\n    g.onerror = null;\r\n  };\r\n  // if iframe\r\n  para.appendCall(g);\r\n};\r\n\r\n_.register_event = (function() {\r\n  // http://dean.edwards.name/weblog/2005/10/add-event/\r\n  // https://gist.github.com/1930440\r\n\r\n  /**\r\n   * @param {Object} element\r\n   * @param {string} type\r\n   * @param {function(...[*])} handler\r\n   * @param {boolean=} oldSchool\r\n   * @param {boolean=} useCapture\r\n   */\r\n  var register_event = function(element, type, handler, oldSchool, useCapture) {\r\n    if (!element) {\r\n      console.error(\"No valid element provided to register_event\");\r\n      return;\r\n    }\r\n\r\n    if (element.addEventListener && !oldSchool) {\r\n      element.addEventListener(type, handler, !!useCapture);\r\n    } else {\r\n      var ontype = \"on\" + type;\r\n      var old_handler = element[ontype]; // can be undefined\r\n      element[ontype] = makeHandler(element, handler, old_handler);\r\n    }\r\n  };\r\n\r\n  function makeHandler(element, new_handler, old_handlers) {\r\n    var handler = function(event) {\r\n      event = event || fixEvent(window.event);\r\n\r\n      //这基本上发生在firefox中的其他脚本中\r\n      //覆盖onload回调函数，不传递事件\r\n      // 对象指向以前定义的回调。所有的浏览器\r\n      //没有定义窗口。事件实现addEventListener\r\n      //因此，dom_loaded处理程序仍然会像往常一样被触发。\r\n      if (!event) {\r\n        return undefined;\r\n      }\r\n\r\n      var ret = true;\r\n      var old_result, new_result;\r\n\r\n      if (_.isFunction(old_handlers)) {\r\n        old_result = old_handlers(event);\r\n      }\r\n      new_result = new_handler.call(element, event);\r\n\r\n      if (false === old_result || false === new_result) {\r\n        ret = false;\r\n      }\r\n\r\n      return ret;\r\n    };\r\n\r\n    return handler;\r\n  }\r\n\r\n  function fixEvent(event) {\r\n    if (event) {\r\n      event.preventDefault = fixEvent.preventDefault;\r\n      event.stopPropagation = fixEvent.stopPropagation;\r\n    }\r\n    return event;\r\n  }\r\n  fixEvent.preventDefault = function() {\r\n    this.returnValue = false;\r\n  };\r\n  fixEvent.stopPropagation = function() {\r\n    this.cancelBubble = true;\r\n  };\r\n\r\n  return register_event;\r\n})();\r\n\r\n_.register_hash_event = function(callback) {\r\n  _.register_event(window, \"hashchange\", callback);\r\n};\r\n\r\n_.getHashParam = function(hash, param) {\r\n  var matches = hash.match(new RegExp(param + \"=([^&]*)\"));\r\n  return matches ? matches[1] : null;\r\n};\r\n// 客户端基本属性\r\n_.info = {\r\n  domain(referrer) {\r\n    const split = referrer.split(\"/\");\r\n    if (split.length >= 3) {\r\n      return split[2];\r\n    }\r\n    return \"\";\r\n  },\r\n  // 设备型号\r\n  deviceModel() {\r\n    let deviceModel = \"\";\r\n    if (device.android()) {\r\n      const sss = win.navigator.userAgent.split(\";\");\r\n      const i = sss.indexOf(\"Build/\");\r\n      if (i > -1) {\r\n        deviceModel = sss[i].substring(0, sss[i].indexOf(\"Build/\"));\r\n      }\r\n    } else if (device.ios()) {\r\n      if (device.iphone()) {\r\n        deviceModel = \"iPhone\";\r\n      }\r\n    }\r\n    return deviceModel;\r\n  },\r\n  properties() {\r\n    const windowsOs = {\r\n      \"5.0\": \"Win2000\",\r\n      \"5.1\": \"WinXP\",\r\n      \"5.2\": \"Win2003\",\r\n      \"6.0\": \"WindowsVista\",\r\n      \"6.1\": \"Win7\",\r\n      \"6.2\": \"Win8\",\r\n      \"6.3\": \"Win8.1\",\r\n      \"10.0\": \"Win10\"\r\n    };\r\n    const devicePlatform = device.type;\r\n\r\n    const deviceModel = _.trim(this.deviceModel());\r\n    const isWindows = device.windows();\r\n    let deviceOsVersion = detector.os.name + \" \" + detector.os.fullVersion;\r\n    if (isWindows) {\r\n      if (windowsOs[detector.os.fullVersion]) {\r\n        deviceOsVersion = windowsOs[detector.os.fullVersion];\r\n      }\r\n    }\r\n    return {\r\n      // 设备型号\r\n      deviceModel: deviceModel,\r\n      // 操作系统\r\n      deviceOs: detector.os.name,\r\n      // 操作系统版本\r\n      deviceOsVersion: deviceOsVersion,\r\n      // 设备平台\r\n      devicePlatform: devicePlatform,\r\n      // 浏览器名称\r\n      browser: detector.browser.name,\r\n      // 浏览器版本\r\n      browserVersion: detector.browser.fullVersion,\r\n      // 页面标题\r\n      title: win.document.title || \"\",\r\n      // 页面路径\r\n      urlPath: win.location.pathname || \"\",\r\n      // 页面url\r\n      currentUrl: document.URL,\r\n      // 域名\r\n      currentDomain: this.domain(document.URL),\r\n      // referrer 数据来源\r\n      referrer: win.document.referrer,\r\n      // referrer 域名\r\n      referringDomain: this.domain(win.document.referrer),\r\n      // 本地语言\r\n      language: win.navigator.language || \"\",\r\n      // 客户端分辨率 width\r\n      screenWidth: win.screen.width,\r\n      // 客户端分辨率 height\r\n      screenHeight: win.screen.height\r\n    };\r\n  }\r\n};\r\n\r\n// 消息订阅/推送\r\n_.innerEvent = {\r\n  /**\r\n   * 订阅\r\n   *  */\r\n\r\n  on: function(key, fn) {\r\n    if (!this._list) {\r\n      this._list = {};\r\n    }\r\n    if (!this._list[key]) {\r\n      this._list[key] = [];\r\n    }\r\n    this._list[key].push(fn);\r\n  },\r\n  off: function(key) {\r\n    if (!this._list) {\r\n      this._list = {};\r\n    }\r\n    if (!this._list[key]) {\r\n      return;\r\n    } else {\r\n      delete this._list[key];\r\n    }\r\n  },\r\n  /**\r\n   * 推送\r\n   */\r\n  trigger: function() {\r\n    var args = Array.prototype.slice.call(arguments);\r\n    var key = args[0];\r\n    var arrFn = this._list && this._list[key];\r\n    if (!arrFn || arrFn.length === 0) {\r\n      return;\r\n    }\r\n    for (var i = 0; i < arrFn.length; i++) {\r\n      if (typeof arrFn[i] == \"function\") {\r\n        arrFn[i].apply(this, args);\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n// 发送数据\r\n_.sendRequest = function(url, type, data, callback) {\r\n  data[\"_\"] = new Date().getTime().toString();\r\n  if (type === \"img\") {\r\n    url += \"?\" + _.HTTPBuildQuery(data);\r\n    let img = document.createElement(\"img\");\r\n    img.src = url;\r\n    img.width = 1;\r\n    img.height = 1;\r\n    if (_.isFunction(callback)) {\r\n      callback(0);\r\n    }\r\n    img.onload = function() {\r\n      this.onload = null;\r\n    };\r\n    img.onerror = function() {\r\n      this.onerror = null;\r\n    };\r\n    img.onabort = function() {\r\n      this.onabort = null;\r\n    };\r\n  } else if (type === \"get\") {\r\n    url += \"?\" + _.HTTPBuildQuery(data);\r\n    _.ajax.get(url, callback);\r\n  } else if (type === \"post\") {\r\n    _.ajax.get(url, data, callback);\r\n  }\r\n};\r\n\r\n_.ajax = {\r\n  post: function(url, options, callback, timeout) {\r\n    var that = this;\r\n    that.callback = callback || function(params) {};\r\n    try {\r\n      var req = new XMLHttpRequest();\r\n      req.open(\"POST\", url, true);\r\n      req.setRequestHeader(\"Content-type\", \"application/json\");\r\n      req.withCredentials = true;\r\n      req.ontimeout = function() {\r\n        that.callback({\r\n          status: 0,\r\n          error: true,\r\n          message: \"request \" + url + \" time out\"\r\n        });\r\n      };\r\n      req.onreadystatechange = function() {\r\n        if (req.readyState === 4) {\r\n          if (req.status === 200) {\r\n            that.callback(_.JSONDecode(req.responseText));\r\n          } else {\r\n            var message =\r\n              \"Bad HTTP status: \" + req.status + \" \" + req.statusText;\r\n            that.callback({ status: 0, error: true, message: message });\r\n          }\r\n        }\r\n      };\r\n      req.timeout = timeout || 5000;\r\n      req.send(_.JSONEncode(options));\r\n    } catch (e) {}\r\n  },\r\n  get: function(url, callback) {\r\n    try {\r\n      var req = new XMLHttpRequest();\r\n      req.open(\"GET\", url, true);\r\n      req.withCredentials = true;\r\n      req.onreadystatechange = function() {\r\n        if (req.readyState === 4) {\r\n          if (req.status === 200) {\r\n            if (callback) {\r\n              callback(req.responseText);\r\n            }\r\n          } else {\r\n            if (callback) {\r\n              var message =\r\n                \"Bad HTTP status: \" + req.status + \" \" + req.statusText;\r\n              callback({ status: 0, error: true, message: message });\r\n            }\r\n          }\r\n        }\r\n      };\r\n      req.send(null);\r\n    } catch (e) {}\r\n  }\r\n};\r\n\r\n// uuid\r\n_.UUID = (function() {\r\n  var T = function() {\r\n    var d = 1 * new Date(),\r\n      i = 0;\r\n    while (d == 1 * new Date()) {\r\n      i++;\r\n    }\r\n    return d.toString(16) + i.toString(16);\r\n  };\r\n  var R = function() {\r\n    return Math.random()\r\n      .toString(16)\r\n      .replace(\".\", \"\");\r\n  };\r\n  var UA = function(n) {\r\n    var ua = navigator.userAgent,\r\n      i,\r\n      ch,\r\n      buffer = [],\r\n      ret = 0;\r\n\r\n    function xor(result, byte_array) {\r\n      var j,\r\n        tmp = 0;\r\n      for (j = 0; j < byte_array.length; j++) {\r\n        tmp |= buffer[j] << (j * 8);\r\n      }\r\n      return result ^ tmp;\r\n    }\r\n\r\n    for (i = 0; i < ua.length; i++) {\r\n      ch = ua.charCodeAt(i);\r\n      buffer.unshift(ch & 0xff);\r\n      if (buffer.length >= 4) {\r\n        ret = xor(ret, buffer);\r\n        buffer = [];\r\n      }\r\n    }\r\n\r\n    if (buffer.length > 0) {\r\n      ret = xor(ret, buffer);\r\n    }\r\n\r\n    return ret.toString(16);\r\n  };\r\n\r\n  return function() {\r\n    // 有些浏览器取个屏幕宽度都异常...\r\n    var se = String(screen.height * screen.width);\r\n    if (se && /\\d{5,}/.test(se)) {\r\n      se = se.toString(16);\r\n    } else {\r\n      se = String(Math.random() * 31242)\r\n        .replace(\".\", \"\")\r\n        .slice(0, 8);\r\n    }\r\n    var val = T() + \"-\" + R() + \"-\" + UA() + \"-\" + se + \"-\" + T();\r\n    if (val) {\r\n      return val;\r\n    } else {\r\n      return (\r\n        String(Math.random()) +\r\n        String(Math.random()) +\r\n        String(Math.random())\r\n      ).slice(2, 15);\r\n    }\r\n  };\r\n})();\r\n\r\n// 存储方法封装 localStorage  cookie\r\n_.localStorage = {\r\n  error: function(msg) {\r\n    console.error(\"localStorage error: \" + msg);\r\n  },\r\n\r\n  get: function(name) {\r\n    try {\r\n      return window.localStorage.getItem(name);\r\n    } catch (err) {\r\n      _.localStorage.error(err);\r\n    }\r\n    return null;\r\n  },\r\n\r\n  parse: function(name) {\r\n    try {\r\n      return _.JSONDecode(_.localStorage.get(name)) || {};\r\n    } catch (err) {\r\n      // noop\r\n    }\r\n    return null;\r\n  },\r\n\r\n  set: function(name, value) {\r\n    try {\r\n      window.localStorage.setItem(name, value);\r\n    } catch (err) {\r\n      _.localStorage.error(err);\r\n    }\r\n  },\r\n\r\n  remove: function(name) {\r\n    try {\r\n      window.localStorage.removeItem(name);\r\n    } catch (err) {\r\n      _.localStorage.error(err);\r\n    }\r\n  }\r\n};\r\n_.cookie = {\r\n  get: function(name) {\r\n    var nameEQ = name + \"=\";\r\n    var ca = document.cookie.split(\";\");\r\n    for (var i = 0; i < ca.length; i++) {\r\n      var c = ca[i];\r\n      while (c.charAt(0) == \" \") {\r\n        c = c.substring(1, c.length);\r\n      }\r\n      if (c.indexOf(nameEQ) === 0) {\r\n        return decodeURIComponent(c.substring(nameEQ.length, c.length));\r\n      }\r\n    }\r\n    return null;\r\n  },\r\n\r\n  parse: function(name) {\r\n    var cookie;\r\n    try {\r\n      cookie = _.JSONDecode(_.cookie.get(name)) || {};\r\n    } catch (err) {\r\n      // noop\r\n    }\r\n    return cookie;\r\n  },\r\n\r\n  set_seconds: function(name, value, seconds, cross_subdomain, is_secure) {\r\n    var cdomain = \"\",\r\n      expires = \"\",\r\n      secure = \"\";\r\n\r\n    if (cross_subdomain) {\r\n      var matches = document.location.hostname.match(\r\n          /[a-z0-9][a-z0-9\\-]+\\.[a-z\\.]{2,6}$/i\r\n        ),\r\n        domain = matches ? matches[0] : \"\";\r\n\r\n      cdomain = domain ? \"; domain=.\" + domain : \"\";\r\n    }\r\n\r\n    if (seconds) {\r\n      var date = new Date();\r\n      date.setTime(date.getTime() + seconds * 1000);\r\n      expires = \"; expires=\" + date.toGMTString();\r\n    }\r\n\r\n    if (is_secure) {\r\n      secure = \"; secure\";\r\n    }\r\n\r\n    document.cookie =\r\n      name +\r\n      \"=\" +\r\n      encodeURIComponent(value) +\r\n      expires +\r\n      \"; path=/\" +\r\n      cdomain +\r\n      secure;\r\n  },\r\n\r\n  set: function(name, value, days, cross_subdomain, is_secure) {\r\n    var cdomain = \"\",\r\n      expires = \"\",\r\n      secure = \"\";\r\n\r\n    if (cross_subdomain) {\r\n      var matches = document.location.hostname.match(\r\n          /[a-z0-9][a-z0-9\\-]+\\.[a-z\\.]{2,6}$/i\r\n        ),\r\n        domain = matches ? matches[0] : \"\";\r\n\r\n      cdomain = domain ? \"; domain=.\" + domain : \"\";\r\n    }\r\n\r\n    if (days) {\r\n      var date = new Date();\r\n      date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\r\n      expires = \"; expires=\" + date.toGMTString();\r\n    }\r\n\r\n    if (is_secure) {\r\n      secure = \"; secure\";\r\n    }\r\n\r\n    var new_cookie_val =\r\n      name +\r\n      \"=\" +\r\n      encodeURIComponent(value) +\r\n      expires +\r\n      \"; path=/\" +\r\n      cdomain +\r\n      secure;\r\n    document.cookie = new_cookie_val;\r\n    return new_cookie_val;\r\n  },\r\n\r\n  remove: function(name, cross_subdomain) {\r\n    _.cookie.set(name, \"\", -1, cross_subdomain);\r\n  }\r\n};\r\n\r\nconst windowConsole = win.console;\r\nconst console = {\r\n  /** @type {function(...[*])} */\r\n  log: function() {\r\n    if (CONFIG.DEBUG && !_.isUndefined(windowConsole) && windowConsole) {\r\n      try {\r\n        windowConsole.log.apply(windowConsole, arguments);\r\n      } catch (err) {\r\n        _.each(arguments, function(arg) {\r\n          windowConsole.log(arg);\r\n        });\r\n      }\r\n    }\r\n  },\r\n  /** @type {function(...[*])} */\r\n  error: function() {\r\n    if (CONFIG.DEBUG && !_.isUndefined(windowConsole) && windowConsole) {\r\n      var args = [\"DATracker error:\"].concat(_.toArray(arguments));\r\n      try {\r\n        windowConsole.error.apply(windowConsole, args);\r\n      } catch (err) {\r\n        _.each(args, function(arg) {\r\n          windowConsole.error(arg);\r\n        });\r\n      }\r\n    }\r\n  },\r\n  /** @type {function(...*)} */\r\n  critical: function() {\r\n    if (!_.isUndefined(windowConsole) && windowConsole) {\r\n      var args = [\"error:\"].concat(_.toArray(arguments));\r\n      try {\r\n        windowConsole.error.apply(windowConsole, args);\r\n      } catch (err) {\r\n        _.each(args, function(arg) {\r\n          windowConsole.error(arg);\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n/**\r\n    字符串加密\r\n    简单的加密方法\r\n  */\r\n_.compile = function(code) {\r\n  let c = String.fromCharCode(code.charCodeAt(0) + code.length);\r\n  for (let i = 1; i < code.length; i++) {\r\n    c += String.fromCharCode(code.charCodeAt(i) + code.charCodeAt(i - 1));\r\n  }\r\n  return c;\r\n};\r\n\r\n/**\r\n    字符串解谜\r\n    对应上面的字符串加密方法\r\n  */\r\n_.uncompile = function(code) {\r\n  let c = String.fromCharCode(code.charCodeAt(0) - code.length);\r\n  for (let i = 1; i < code.length; i++) {\r\n    c += String.fromCharCode(code.charCodeAt(i) - c.charCodeAt(i - 1));\r\n  }\r\n  return c;\r\n};\r\n\r\n// UNDERSCORE\r\n// Embed part of the Underscore Library\r\n_.bind = function(func, context) {\r\n  var args, bound;\r\n  if (nativeBind && func.bind === nativeBind) {\r\n    return nativeBind.apply(func, slice.call(arguments, 1));\r\n  }\r\n  if (!_.isFunction(func)) {\r\n    throw new TypeError();\r\n  }\r\n  args = slice.call(arguments, 2);\r\n  bound = function() {\r\n    if (!(this instanceof bound)) {\r\n      return func.apply(context, args.concat(slice.call(arguments)));\r\n    }\r\n    var ctor = {};\r\n    ctor.prototype = func.prototype;\r\n    var self = new ctor();\r\n    ctor.prototype = null;\r\n    var result = func.apply(self, args.concat(slice.call(arguments)));\r\n    if (Object(result) === result) {\r\n      return result;\r\n    }\r\n    return self;\r\n  };\r\n  return bound;\r\n};\r\n\r\n_.bindInstanceMethods = function(obj) {\r\n  for (var func in obj) {\r\n    if (typeof obj[func] === \"function\") {\r\n      obj[func] = _.bind(obj[func], obj);\r\n    }\r\n  }\r\n};\r\n\r\n_.safewrap = function(f) {\r\n  return function() {\r\n    try {\r\n      return f.apply(this, arguments);\r\n    } catch (e) {\r\n      console.log(\r\n        \"Implementation error. Please turn on debug and contact support@mixpanel.com.\"\r\n      );\r\n      if (CONFIG.DEBUG) {\r\n        console.log(e);\r\n      }\r\n    }\r\n  };\r\n};\r\n\r\n_.safewrap_class = function(klass, functions) {\r\n  for (var i = 0; i < functions.length; i++) {\r\n    klass.prototype[functions[i]] = _.safewrap(klass.prototype[functions[i]]);\r\n  }\r\n};\r\n\r\n_.safewrapInstanceMethods = function(obj) {\r\n  for (var func in obj) {\r\n    if (typeof obj[func] === \"function\") {\r\n      obj[func] = _.safewrap(obj[func]);\r\n    }\r\n  }\r\n};\r\n_.getById = function(id) {\r\n  return document.getElementById(id);\r\n};\r\n\r\n_.getPropsDom = function(parentNode, propsName) {\r\n    return parentNode.querySelectorAll(`[${propsName}]`)\r\n};\r\n\r\nexport { _, console, win };\r\n","import {\r\n  PEOPLE_RESERVED_PROPERTY,\r\n  SYSTEM_EVENT_TYPE,\r\n  PEOPLE_PROPERTY_ID\r\n} from './config'\r\n\r\nimport {_, console} from './utils'\r\n\r\nclass USER_TRACK {\r\n  constructor(instance) {\r\n    this.instance = instance;\r\n    this['local_storage'] = this.instance['local_storage'];\r\n  }\r\n  /**\r\n   * 检测设置的属性是否为系统保留属性\r\n   * @param {String} prop \r\n   */\r\n  _is_reserved_property(prop) {\r\n    return PEOPLE_RESERVED_PROPERTY.indexOf('prop') > -1;\r\n  }\r\n  /**\r\n   * 上报用户属性数据\r\n   * @param {Object} properties \r\n   * @param {Function} callback \r\n   */\r\n  _send_request(properties, callback) {\r\n    if (!_.isFunction(callback)) {\r\n      callback = function() {};\r\n    }\r\n\r\n    properties = properties || {};\r\n    \r\n    let data = {\r\n      dataType: SYSTEM_EVENT_TYPE,\r\n      // 客户端唯一凭证(设备凭证)\r\n      deviceId: this.instance.get_device_id(),\r\n      userId: this.instance.get_property('user_id'),\r\n      // 上报时间\r\n      time: new Date().getTime(),\r\n      // sdk类型 （js，小程序、安卓、IOS、server、pc）\r\n      sdkType: 'js',\r\n      // 属性事件id\r\n      eventId: PEOPLE_PROPERTY_ID,\r\n      // 用户首次访问时间\r\n      persistedTime: this.instance.get_property('persistedTime'),\r\n      // 页面打开场景, 默认 Browser\r\n      pageOpenScene: 'Browser',\r\n      // 自定义用户属性\r\n      attributes: properties\r\n    };\r\n\r\n    // 合并渠道推广信息\r\n    // data = _.extend({}, data, this.instance['channel'].get_channel_params());\r\n\r\n    // 上报数据对象字段截取\r\n    const truncateLength = this.instance._get_config('truncateLength');\r\n    let truncated_data = data;\r\n    if (_.isNumber(truncateLength) && truncateLength > 0) {\r\n      truncated_data = _.truncate(data, truncateLength);\r\n    }\r\n\r\n    console.log(JSON.stringify(truncated_data,null,\"  \")); \r\n    const callback_fn = (response) => {\r\n      callback(response, data);\r\n    };\r\n    let url = this.instance._get_config('track_url');\r\n    \r\n    // 数据上报方式\r\n    const track_type = this.instance._get_config('track_type');\r\n    if (track_type === 'img') {\r\n      url += 'track.gif';\r\n    }\r\n    _.sendRequest(\r\n      url, \r\n      track_type, \r\n      { data: _.base64Encode(_.JSONEncode(truncated_data)), token: this.instance._get_config('token') }, \r\n      callback_fn\r\n    );\r\n  }\r\n  /**\r\n   * 设置用户属性\r\n   * @param {*} prop \r\n   * @param {*} to \r\n   * @param {*} callback \r\n   */\r\n  set(prop, to, callback) {\r\n    let set_props = {};\r\n    if (_.isObject(prop)) {\r\n      _.each(prop, (v ,k) => {\r\n        // 不是系统保留属性\r\n        if (!this._is_reserved_property(k)) {\r\n          set_props[k] = v;\r\n        }\r\n      });\r\n      callback = to;\r\n    } else {\r\n      set_props[prop] = to;\r\n    }\r\n    return this._send_request(set_props, callback);\r\n  }\r\n}\r\n\r\nexport default USER_TRACK;","import {\r\n  CONFIG,\r\n  DEFAULT_CONFIG,\r\n  SYSTEM_EVENT_TYPE,\r\n  BUSSINESS_EVENT_TYPE,\r\n  SYSTEM_EVENT_OBJECT\r\n} from \"./config\";\r\n\r\nimport { _, console } from \"./utils\";\r\n\r\nclass EVENT_TRACK {\r\n  constructor(instance) {\r\n    this.instance = instance;\r\n    this[\"local_storage\"] = this.instance[\"local_storage\"];\r\n    // 初始化时间(事件相关)\r\n    this[\"local_storage\"].register_once({\r\n      updatedTime: 0,\r\n      sessionStartTime: 0\r\n    });\r\n    // 将当前的referrer保存到本地缓存\r\n    this[\"local_storage\"].register({\r\n      sessionReferrer: document.referrer\r\n    });\r\n\r\n    let mark_page_url = document.URL;\r\n    // 单页面触发PV事件时，设置 referrer\r\n    _.innerEvent.on(\"singlePage:change\", (eventName, urlParams) => {\r\n      this[\"local_storage\"].register({\r\n        sessionReferrer: mark_page_url\r\n      });\r\n      mark_page_url = document.URL;\r\n    });\r\n  }\r\n  /**\r\n   *\r\n   * 判断是否为其它渠道\r\n   */\r\n  _check_channel() {\r\n    const referrer = this.instance.get_property(\"sessionReferrer\");\r\n    let is_other_channel = false;\r\n    // 若本地缓存的referrer 的host跟当前页不一样，那么可以确定是其它渠道进来的\r\n    if (_.getHost(referrer) !== window.location.host) {\r\n      is_other_channel = true;\r\n    }\r\n    return is_other_channel;\r\n  }\r\n  /**\r\n   * TODO\r\n   * 判断指定事件是否被禁止上报\r\n   * @param {String} event_name\r\n   * @returns {Boolean}\r\n   */\r\n  _event_is_disabled(event_name) {\r\n    return false;\r\n  }\r\n  /**\r\n   * 打开新会话\r\n   */\r\n  _start_new_session() {\r\n    this[\"local_storage\"].register({\r\n      sessionUuid: _.UUID(),\r\n      sessionStartTime: new Date().getTime()\r\n    });\r\n    this.track(\"sxfData_session_start\");\r\n  }\r\n  /**\r\n   * TODO\r\n   * 关闭当前会话\r\n   */\r\n  _close_cur_session() {\r\n    /*\r\n     为了便于绘制用户事件发生轨迹图，区分会话close和最后一次事件触发时间的顺序，会话关闭时间需要做些微调\r\n     1. 如果本地拿到了上次（非会话事件）事件的触发时间，time = this.instance.get_property('LASTEVENT').time + 1;\r\n     2. 如果未拿到，time = new Date().getTime() - 1;\r\n    */\r\n    let time = new Date().getTime() - 1;\r\n    const sessionStartTime = this.instance.get_property(\"sessionStartTime\");\r\n    const LASTEVENT = this.instance.get_property(\"LASTEVENT\");\r\n    if (LASTEVENT && LASTEVENT.time) {\r\n      time = LASTEVENT.time + 1;\r\n    }\r\n    const sessionTotalLength = time - sessionStartTime;\r\n    if (sessionTotalLength >= 0) {\r\n      this.track(\"sxfData_session_close\", {\r\n        sessionCloseTime: time,\r\n        sessionTotalLength: sessionTotalLength\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * 判断会话重新开启\r\n   * 判断条件：会话首次开始、指定的一段时间内用户无事件操作、其它渠道进来\r\n   */\r\n  _session(callback) {\r\n    const session_start_time =\r\n      (1 * this.instance.get_property(\"sessionStartTime\")) / 1000;\r\n    const updated_time = (1 * this.instance.get_property(\"updatedTime\")) / 1000;\r\n    const now_date_time_ms = new Date().getTime();\r\n    const now_date_time_se = (1 * now_date_time_ms) / 1000;\r\n    // 其它渠道判断\r\n    const other_channel_Bool = this._check_channel();\r\n    //会话结束判断\r\n    if (\r\n      session_start_time === 0 ||\r\n      now_date_time_se >\r\n        updated_time +\r\n          60 * this.instance._get_config(\"session_interval_mins\") ||\r\n      other_channel_Bool\r\n    ) {\r\n      // 当会话首次开始时，不用发送会话关闭事件\r\n      if (session_start_time === 0) {\r\n        // 新打开一个会话\r\n        this._start_new_session();\r\n      } else {\r\n        this._close_cur_session();\r\n        this._start_new_session();\r\n      }\r\n    }\r\n    // 更新本地的最后事件操作时间\r\n    this[\"local_storage\"].register({\r\n      updatedTime: now_date_time_ms\r\n    });\r\n    // 执行回调方法\r\n    if (_.isFunction(callback)) {\r\n      callback();\r\n    }\r\n  }\r\n  /**\r\n   * 用户注册\r\n   * @param {String} user_id\r\n   */\r\n  _signup(user_id) {\r\n    // 默认是空值,若有值则调用退出\r\n    const anonymous_id = this.instance.get_property(\"userId\");\r\n    if (anonymous_id !== user_id) {\r\n      if (anonymous_id) {\r\n        this.logout();\r\n      }\r\n      this.track(\"sxfData_u_signup\", {\r\n        anonymousId: anonymous_id,\r\n        newUserId: user_id\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * 设置一个指定事件的耗时监听器\r\n   * @param {String} event_name\r\n   */\r\n  time_event(event_name) {\r\n    if (_.isUndefined(event_name)) {\r\n      console.error(\"事件耗时监听器需要一个事件名称\");\r\n      return;\r\n    }\r\n    // 被禁止的事件，无需监听\r\n    if (this._event_is_disabled(event_name)) {\r\n      return;\r\n    }\r\n    this[\"local_storage\"].set_event_timer(event_name, new Date().getTime());\r\n  }\r\n  /**\r\n   * 发送PV事件，在此之前检测session\r\n   * @param {Object} properties  pv属性\r\n   * @param {*} callback\r\n   */\r\n  track_pv(properties, callback) {\r\n    this._session(() => {\r\n      this.track(\"sxfData_pv\", _.extend({}, properties), callback);\r\n    });\r\n  }\r\n  /**\r\n   * 追踪事件（上报用户事件触发数据）\r\n   * @param {String} event_name 事件名称（必须）\r\n   * @param {Object} properties 事件属性\r\n   * @param {Function} callback 上报后的回调方法\r\n   * @param {String} event_type 自定义事件类型\r\n   * @returns {Object} track_data 上报的数据\r\n   */\r\n  track(event_name, properties, callback, event_type) {\r\n    if (_.isUndefined(event_name)) {\r\n      console.error(\"上报数据需要一个事件名称\");\r\n      return;\r\n    }\r\n    if (!_.isFunction(callback)) {\r\n      callback = function() {};\r\n    }\r\n    if (this._event_is_disabled(event_name)) {\r\n      callback(0);\r\n      return;\r\n    }\r\n    // 重新在本地取数据读取到缓存\r\n    this[\"local_storage\"].load();\r\n    // 事件属性\r\n    properties = properties || {};\r\n    // 标记：传入的属性另存一份\r\n    let user_set_properties = _.JSONDecode(_.JSONEncode(properties)) || {};\r\n    let costTime;\r\n    // 移除该事件的耗时监听器，获取设置监听器的时间戳，计算耗时\r\n    const start_listen_timestamp = this[\"local_storage\"].remove_event_timer(\r\n      event_name\r\n    );\r\n    if (!_.isUndefined(start_listen_timestamp)) {\r\n      costTime = new Date().getTime() - start_listen_timestamp;\r\n    }\r\n    // 事件类型设置\r\n    let data_type = BUSSINESS_EVENT_TYPE;\r\n    // 事件类型设置为传入了自定义事件类型\r\n    if (event_type) {\r\n      data_type = event_type;\r\n    }\r\n    // 如果是内置事件,事件类型重新设置\r\n    else if (SYSTEM_EVENT_OBJECT[event_name]) {\r\n      data_type = SYSTEM_EVENT_OBJECT[event_name].data_type;\r\n    }\r\n\r\n    // 事件触发时间\r\n    let time = new Date().getTime();\r\n    // 会话有时间差\r\n    // 触发的事件若是会话结束，触发时间要重新设置\r\n    // 若事件id为会话关闭，需要删除传入的自定义属性\r\n    if (event_name === \"sxfData_session_close\") {\r\n      time = properties.sessionCloseTime;\r\n      delete user_set_properties[\"sessionCloseTime\"];\r\n      delete user_set_properties[\"sessionTotalLength\"];\r\n    }\r\n\r\n    // 设置通用的事件属性\r\n    user_set_properties = _.extend(\r\n      {},\r\n      this.instance.get_property(\"superProperties\"),\r\n      user_set_properties\r\n    );\r\n\r\n    // 上报数据\r\n    let data = {\r\n      dataType: data_type,\r\n      userId: this.instance.get_property(\"userId\"),\r\n      // sdk类型 （js，小程序、安卓、IOS、server、pc）\r\n      sdkType: \"js\",\r\n      sdkVersion: CONFIG.LIB_VERSION,\r\n      // 事件名称\r\n      eventId: event_name,\r\n      // 事件触发时间\r\n      time: time,\r\n      // 用户首次访问时间\r\n      persistedTime: this.instance.get_property(\"persistedTime\"),\r\n      // 客户端唯一凭证(设备凭证)\r\n      deviceId: this.instance.get_device_id(),\r\n      // 页面打开场景, 默认 Browser\r\n      pageOpenScene: \"Browser\",\r\n      // 应用凭证\r\n      token: this.instance._get_config(\"token\"),\r\n      // 监听事件耗时\r\n      costTime: costTime,\r\n      // 当前关闭的会话时长\r\n      sessionTotalLength: properties.sessionTotalLength,\r\n      // 当前会话id\r\n      sessionUuid: this.instance.get_property(\"sessionUuid\"),\r\n      // 事件自定义属性\r\n      attributes: user_set_properties\r\n    };\r\n    // 合并客户端信息\r\n    data = _.extend({}, data, _.info.properties());\r\n\r\n    // 合并渠道推广信息\r\n    // data = _.extend({}, data, this.instance[\"channel\"].get_channel_params());\r\n\r\n    //只有已访问页面后，sessionReferrer 重置\r\n    //如果不是内置事件，那么 sessionReferrer 重置\r\n    //如果是'da_activate'，那么 sessionReferrer 重置\r\n    //解决referrer 当是外链时，此时触发自定义事件，引起重启一个session问题。\r\n    if (data_type === BUSSINESS_EVENT_TYPE) {\r\n      // 其它渠道\r\n      if (this._check_channel()) {\r\n        this[\"local_storage\"].register({\r\n          sessionReferrer: document.URL\r\n        });\r\n      }\r\n    }\r\n    if (!this.instance._get_config(\"SPA\").is) {\r\n      if ([\"sxfData_activate\", \"sxfData_session_close\"].indexOf(event_name) > 0) {\r\n        this[\"local_storage\"].register({\r\n          sessionReferrer: document.URL\r\n        });\r\n      }\r\n    }\r\n\r\n    // 当启动单页面后，切换页面，refer为空，此时做处理\r\n    if (this.instance._get_config(\"SPA\").is) {\r\n      const sessionReferrer = this.instance.get_property(\"sessionReferrer\");\r\n      if (sessionReferrer !== data[\"referrer\"]) {\r\n        data[\"referrer\"] = sessionReferrer;\r\n        data[\"referringDomain\"] = _.info.domain(sessionReferrer);\r\n      }\r\n    }\r\n\r\n    // 上报数据对象字段截取\r\n    const truncateLength = this.instance._get_config(\"truncateLength\");\r\n    let truncated_data = data;\r\n    if (_.isNumber(truncateLength) && truncateLength > 0) {\r\n      truncated_data = _.truncate(data, truncateLength);\r\n    }\r\n\r\n    console.log(JSON.stringify(truncated_data, null, \"  \"));\r\n\r\n    const callback_fn = response => {\r\n      callback(response, data);\r\n    };\r\n    let url = this.instance._get_config(\"track_url\");\r\n    const track_type = this.instance._get_config(\"track_type\");\r\n    if (track_type === \"img\") {\r\n      url += \"track.gif\";\r\n    }\r\n    if (\r\n      !this.instance._get_config(\"isBpoint\") ||\r\n      (user_set_properties &&\r\n        user_set_properties.sxfDataConfig &&\r\n        !user_set_properties.sxfDataConfig.isBpoint)\r\n    ) {\r\n      _.sendRequest(\r\n        url,\r\n        track_type,\r\n        {\r\n          data: _.base64Encode(_.JSONEncode(truncated_data)),\r\n          token: this.instance._get_config(\"token\")\r\n        },\r\n        callback_fn\r\n      );\r\n    } else {\r\n      try {\r\n        this.instance[\"bpoint\"].push(truncated_data);\r\n      } catch (error) {\r\n        _.sendRequest(\r\n          url,\r\n          track_type,\r\n          {\r\n            data: _.base64Encode(_.JSONEncode(truncated_data)),\r\n            token: this.instance._get_config(\"token\")\r\n          },\r\n          callback_fn\r\n        );\r\n      }\r\n    }\r\n\r\n    // 当触发的事件不是这些事件(sxfData_session_start,sxfData_session_close,sxfData_activate)时，触发检测 session 方法\r\n    if (\r\n      [\"sxfData_session_start\", \"sxfData_session_close\", \"sxfData_activate\"].indexOf(\r\n        event_name\r\n      ) === -1\r\n    ) {\r\n      this._session();\r\n    }\r\n\r\n    // 保存最后一次用户触发事件（除了会话事件以外）的事件id以及时间，通过这个时间确定会话关闭时的时间\r\n    if (\r\n      [\"sxfData_session_start\", \"sxfData_session_close\"].indexOf(event_name) === -1\r\n    ) {\r\n      this[\"local_storage\"].register({\r\n        LASTEVENT: {\r\n          eventId: event_name,\r\n          time: time\r\n        }\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * 用户登录和注册时调用\r\n   * @param {String} user_id\r\n   */\r\n  login(user_id) {\r\n    this._signup(user_id);\r\n    this[\"local_storage\"].register({ userId: user_id });\r\n    this.track(\"sxfData_u_login\");\r\n  }\r\n  // 清除本地用户信息，退出用户（选则调用）\r\n  logout() {\r\n    this[\"local_storage\"].unregister(\"userId\");\r\n    this.track(\"sxfData_u_logout\");\r\n  }\r\n}\r\n\r\nexport default EVENT_TRACK;\r\n","import {_, console} from './utils';\r\n\r\n\r\nclass LOCAL_STORAGE {\r\n  /**\r\n   * \r\n   * @param {Object} config\r\n   */\r\n  constructor(config) {\r\n    const local_storage = config['local_storage'];\r\n    if (_.isObject(local_storage)) {\r\n      this['name'] = local_storage['name'] || ('sxfData_' + config['token'] + '_sdk');\r\n      let storage_type = local_storage['type'] || 'cookie';\r\n\r\n      // 判断是否支持 localStorage\r\n      const localStorage_supported = () => {\r\n        let supported = true;\r\n        try {\r\n          let key = '__sxfDatassupport__',\r\n          val = 'sxfData_web_data_sdk';\r\n          _.localStorage.set(key, val);\r\n          if (_.localStorage.get(key) !== val) {\r\n              supported = false;\r\n          }\r\n          _.localStorage.remove(key);\r\n        } catch (error) {\r\n          supported = false;\r\n        }\r\n        if (!supported) {\r\n          console.error('localStorage 不支持，自动退回到cookie存储方式');\r\n        }\r\n        return supported;\r\n      };\r\n\r\n      if (storage_type === 'localStorage' && localStorage_supported()) {\r\n        this['storage'] = _.localStorage;\r\n      } else {\r\n        this['storage'] = _.cookie;\r\n      }\r\n      \r\n      this.load();\r\n      this.update_config(local_storage);\r\n      // TODO: upgrade\r\n      this.upgrade();\r\n      this.save();\r\n    } else {\r\n      console.error('local_storage配置设置错误');\r\n    }\r\n  }\r\n  // 加载本地存储信息\r\n  load() {\r\n    const localData = this['storage'].parse(this['name']);\r\n    if (localData) {\r\n      this['props'] = _.extend({}, localData);\r\n    }\r\n  }\r\n  // 更新配置信息\r\n  update_config(localStorageConfig) {\r\n    // 到期时间(cookie存储设置有效)\r\n    this.default_expiry = this.expire_days = localStorageConfig['cookie_expiration'];\r\n    this.set_disabled(localStorageConfig['disable']);\r\n    this.set_cross_subdomain(localStorageConfig['cross_subdomain_cookie']);\r\n    this.set_secure(localStorageConfig['secure_cookie']);\r\n  }\r\n  // 设置关闭本地保存操作，设置为关闭后，本地数据移除\r\n  set_disabled(disabled) {\r\n    this.disabled = disabled;\r\n    if (this.disabled) {\r\n      this.remove();\r\n    }\r\n  }\r\n  // 移除本地数据\r\n  remove() {\r\n    // cookie存储时，移除二级域以及子域下的cookie,此时参数有两个\r\n    this.storage.remove(this.name, false);\r\n    this.storage.remove(this.name, true);\r\n  }\r\n  // 清除存储的数据\r\n  clear() {\r\n    this.remove();\r\n    this['props'] = {};\r\n  }\r\n  /**\r\n   * 跨子域设置,cookie存储方式下有效\r\n   * @param {Boolean} cross_subdomain \r\n   */\r\n  set_cross_subdomain(cross_subdomain) {\r\n    if (cross_subdomain !== this.cross_subdomain) {\r\n      this.cross_subdomain = cross_subdomain;\r\n      this.remove();\r\n      this.save();\r\n    }\r\n  }\r\n  /**\r\n   * cookie存储方式下有效\r\n   * cookie存储时，采用安全的方式存储数据，调用该方法后，重新保存数据\r\n   * 当secure属性设置为true时，cookie只有在https协议下才能上传到服务器，\r\n   * 而在http协议下是没法上传的，所以也不会被窃听\r\n   * @param {Boolean} secure \r\n   */\r\n  set_secure(secure) {\r\n    if (secure !== this.secure) {\r\n      this.secure = secure ? true : false;\r\n      this.remove();\r\n      this.save();\r\n    }\r\n  }\r\n  // sdk升级，旧的sdk存储数据移到新的sdk存储数据中，然后删除旧的存储数据（暂不实现）\r\n  // 存储方式改变，改为cookie切换到 localStorage\r\n  upgrade(config) {\r\n    let old_cookie;\r\n    if (this.storage === _.localStorage) {\r\n      old_cookie = _.cookie.parse(this.name);\r\n      _.cookie.remove(this.name);\r\n      _.cookie.remove(this.name, true);\r\n\r\n      if (old_cookie) {\r\n        this.register_once(old_cookie);\r\n      }\r\n    }\r\n  }\r\n  // 数据保存到本地\r\n  save() {\r\n    // disabled配置为true, 数据不保存到本地\r\n    if (this.disabled) {\r\n      return;\r\n    }\r\n    this.storage.set(\r\n      this['name'],\r\n      _.JSONEncode(this['props']),\r\n      this.expire_days,\r\n      this.cross_subdomain,\r\n      this.secure\r\n    );\r\n  }\r\n  /**\r\n   * 缓存指定的数据，同时将该数据保存到本地\r\n   * @param {Object} props \r\n   * @param {Number} days\r\n   * @returns {Boolean} 返回true表示成功\r\n   */\r\n  register(props, days) {\r\n    if (_.isObject(props)) {\r\n      this.expire_days = ( typeof days === 'undefined' ) ? this.default_expiry : days;\r\n      _.extend(this['props'], props);\r\n      this.save();\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  /**\r\n   * 只缓存一次指定的数据，下次设置该数据时不会覆盖前一次数据\r\n   * 若想更新已设置的属性值，那么default_value参数值要等于本地缓存数据中需重置的属性的值(默认值)\r\n   * this['props'][prop] === default_value   prop为需更新的属性\r\n   * @param {Object} props\r\n   * @param {*} default_value\r\n   * @param {Number} days\r\n   * @returns {Boolean} 返回true表示成功\r\n   */\r\n  register_once(props, default_value, days) {\r\n    if (_.isObject(props)) {\r\n      if (typeof default_value === 'undefined') {\r\n        default_value = 'None';\r\n      }\r\n      this.expire_days = ( typeof days === 'undefined' ) ? this.default_expiry : days;\r\n\r\n      _.each(props, function(val, prop) {\r\n        if (!this['props'][prop] || this['props'][prop] === default_value) {\r\n          this['props'][prop] = val;\r\n        }\r\n      }, this);\r\n\r\n      this.save();\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  /**\r\n   * 移除指定的缓存数据，同时也清除本地的对应数据\r\n   * @param {string} prop\r\n   */\r\n  unregister(prop) {\r\n    if (prop in this['props']) {\r\n      delete this['props'][prop];\r\n      this.save();\r\n    }\r\n  }\r\n  /**\r\n   * 设置一个事件计时器，记录用户触发指定事件需要的时间，同时保存到本地\r\n   * @param {String} event_name 该计时器的名称\r\n   * @param {Date} timestamp 该计时器开始时间戳\r\n   */\r\n  set_event_timer(event_name, timestamp) {\r\n    const timers = this['props']['costTime'] || {};\r\n    timers[event_name] = timestamp;\r\n    this['props']['costTime'] = timers;\r\n    this.save();\r\n  }\r\n  /**\r\n   * 移除指定计时器，同时将本地存储的该计时器信息清除\r\n   * @param {String} event_name\r\n   * @returns {Date} 返回移除该计时器的时间戳\r\n   */\r\n  remove_event_timer(event_name) {\r\n    const timers = this['props']['costTime'] || {};\r\n    const timestamp = timers[event_name];\r\n    if (!_.isUndefined(timestamp)) {\r\n      delete this['props']['costTime'][event_name];\r\n      this.save();\r\n    }\r\n    return timestamp;\r\n  }\r\n};\r\n\r\nexport default LOCAL_STORAGE;","/**\r\n * 单页面模块\r\n */\r\nimport { _ } from \"./utils\";\r\n\r\nfunction on(obj, event, callFn) {\r\n  if (obj[event]) {\r\n    const fn = obj[event];\r\n    obj[event] = function() {\r\n      const args = Array.prototype.slice.call(arguments);\r\n      callFn.apply(this, args);\r\n      fn.apply(this, args);\r\n    };\r\n  } else {\r\n    obj[event] = function() {\r\n      const args = Array.prototype.slice.call(arguments);\r\n      callFn.apply(this, args);\r\n    };\r\n  }\r\n}\r\n\r\nfunction getPath() {\r\n  return location.pathname + location.search;\r\n}\r\n\r\nconst SPA = {\r\n  config: {\r\n    mode: \"hash\",\r\n    track_replace_state: false,\r\n    callback_fn: () => {}\r\n  },\r\n  init(config) {\r\n    this.config = _.extend(this.config, config || {});\r\n    this.path = getPath();\r\n    this.url = document.URL;\r\n    this.event();\r\n  },\r\n  event() {\r\n    if (this.config.mode === \"history\") {\r\n      if (!history.pushState || !window.addEventListener) return;\r\n      on(history, \"pushState\", this.pushStateOverride.bind(this));\r\n      on(history, \"replaceState\", this.replaceStateOverride.bind(this));\r\n      window.addEventListener(\"popstate\", this.handlePopState.bind(this));\r\n    } else if (this.config.mode === \"hash\") {\r\n      _.register_hash_event(this.handleHashState.bind(this));\r\n    }\r\n  },\r\n  pushStateOverride() {\r\n    this.handleUrlChange(true);\r\n  },\r\n  replaceStateOverride() {\r\n    this.handleUrlChange(false);\r\n  },\r\n  handlePopState() {\r\n    this.handleUrlChange(true);\r\n  },\r\n  handleHashState() {\r\n    this.handleUrlChange(true);\r\n  },\r\n  handleUrlChange(historyDidUpdate) {\r\n    setTimeout(() => {\r\n      if (this.config.mode === \"hash\") {\r\n        if (_.isFunction(this.config.callback_fn)) {\r\n          this.config.callback_fn.call();\r\n          _.innerEvent.trigger(\"singlePage:change\", {\r\n            oldUrl: this.url,\r\n            nowUrl: document.URL\r\n          });\r\n          this.url = document.URL;\r\n        }\r\n      } else if (this.config.mode === \"history\") {\r\n        const oldPath = this.path;\r\n        const newPath = getPath();\r\n        if (oldPath != newPath && this.shouldTrackUrlChange(newPath, oldPath)) {\r\n          this.path = newPath;\r\n          if (historyDidUpdate || this.config.track_replace_state) {\r\n            if (typeof this.config.callback_fn === \"function\") {\r\n              this.config.callback_fn.call();\r\n              _.innerEvent.trigger(\"singlePage:change\", {\r\n                oldUrl: this.url,\r\n                nowUrl: document.URL\r\n              });\r\n              this.url = document.URL;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }, 0);\r\n  },\r\n  shouldTrackUrlChange(newPath, oldPath) {\r\n    return !!(newPath && oldPath);\r\n  }\r\n};\r\n\r\nexport default SPA;\r\n","import { CHANNEL_PARAMS, CONFIG } from \"./config\";\nimport { _, console } from \"./utils\";\n\nclass BPOINT {\n  constructor(instance) {\n    this.instance = instance;\n    this._infoStack = []; //信息存储栈 收集的信息将暂存到这里 等待打包移动到待发送队列\n\n    this._waitSendQueue = []; //待发送队列，存储多个信息存储栈帧 等待被发送给后台\n\n    this._queueSending = false; //是否在队列递归发送栈帧\n\n    this._scanStackIntervalId = null; //stack 扫描定时器的id\n\n    this._scanWaitSendQqueueIntervalId = null; //WaitSendQqueue 扫描定时器的id\n    this._loadFN = []; //用于存储调用者需要在插件load时的执行的fn\n  }\n  /**\n   * 上一个页面的历史数据提交\n   * @private\n   */\n  _oldDataCheck() {\n    var oldData = _.localStorage.get(\"_bp_wqueue\");\n    if (oldData != null && oldData != \"\") {\n      try {\n        oldData = eval(\"(\" + oldData + \")\");\n        if (_.isArray(oldData) && oldData.length > 0) {\n          var sendData = {};\n          sendData = _.localStorage.set(\"_bp_infoConf\");\n          sendData = eval(\"(\" + sendData + \")\");\n\n          for (; oldData.length > 0; ) {\n            sendData = oldData.pop();\n            //数据发送\n            //发送栈帧+环境配置信息\n            this._sendByImg(sendData);\n          }\n        }\n      } catch (e) {}\n\n      _.localStorage.remove(\"_bp_wqueue\");\n    }\n  }\n  /**\n   * 扫描信息栈中是否有数据 有数据 则将数据栈移入队列\n   * @param t\n   * @private\n   */\n  _scanStack(t) {\n    if (t != null && t >= 1) {\n      if (this._scanStackIntervalId != null) {\n        //如果已经存在定时器 需要先删除此定时，再创建新的定时器，防止出现重复定时器创建，最终导致内存泄露\n        clearInterval(this._scanStackIntervalId);\n      }\n      this._scanStackIntervalId = setInterval(() => {\n        this.stack2queue();\n      }, t * 1000);\n    } else {\n      console.log(\"埋点内置对象丢失,栈扫描器创建失败\", 1);\n      throw new ReferenceError(\"埋点内置对象丢失,栈扫描器创建失败\");\n    }\n  }\n  _scanWaitSendQqueue(t) {\n    if (t != null && t >= 1) {\n      if (this._scanWaitSendQqueueIntervalId != null) {\n        //如果已经存在定时器 需要先删除此定时，再创建新的定时器，防止出现重复定时器创建，最终导致内存泄露\n        clearInterval(this._scanWaitSendQqueueIntervalId);\n      }\n      this._scanWaitSendQqueueIntervalId = setInterval(() => {\n        console.log(\"开启等待发送--scanWaitSendQqueue\");\n        this.send();\n      }, t * 1000);\n    } else {\n      console.log(\"埋点内置对象丢失,队列扫描器创建失败\", 1);\n      throw new ReferenceError(\"埋点内置对象丢失,队列扫描器创建失败\");\n    }\n  }\n  /**\n   * 发送队列里最老的栈帧\n   */\n  sendOldestStack() {\n    var stack = this._waitSendQueue.pop();\n    if (_.localStorage) {\n      _.localStorage.set(\"_bp_wqueue\", JSON.stringify(this._waitSendQueue));\n    }\n\n    console.log(\"send stack(queue pop):\");\n\n    var sendData = {};\n    sendData = stack;\n\n    //数据发送\n    //发送栈帧+环境配置信息\n    this._sendByImg(sendData);\n  }\n  _sendByImg(truncated_data) {\n    console.log(\"truncated_data\", truncated_data);\n    let url = this.instance._get_config(\"track_url\");\n    const track_type = this.instance._get_config(\"track_type\");\n    if (track_type === \"img\") {\n      url += \"track.gif\";\n    }\n    _.sendRequest(\n      url,\n      track_type,\n      {\n        data: _.base64Encode(_.JSONEncode(truncated_data)),\n        token: this.instance._get_config(\"token\")\n      },\n      () => {}\n    );\n  }\n  /**\n   * 设置存在埋点信息的栈的大小\n   * 调用此方法，如果栈的数据量>stackSize，则触发栈帧入待发送队列\n   * @param stackSize 栈的大小 大于0的整数 如果是小数或者字符串，将先使用parseInt处理\n   */\n  setStackSize(stackSize) {\n    stackSize = parseInt(stackSize);\n    if (stackSize < 1) {\n      return;\n    }\n    this._option.stackSize = stackSize;\n\n    if (this._infoStack.length >= stackSize) {\n      // 如果已经满了 则送入待发送队列\n      this.stack2queue();\n    }\n  }\n\n  /**\n   * 栈帧入队列  等待被发送\n   */\n  stack2queue() {\n    console.log(\"开始扫描--scanStack\");\n    var is = this._infoStack;\n    // if (window._sxfmt && window._sxfmt.length > 0) {\n    //   console.log(\"_sxfmt.length=\" + _sxfmt.length);\n    //   console.log(_sxfmt);\n    //   is = is.concat(_sxfmt);\n    //   window._sxfmt = [];\n    // }\n\n    console.log(\"infoStack length=\" + is.length);\n    if (is.length > 0) {\n\n      this._queueSave(is);\n      this._infoStack = [];\n    } else {\n      console.log(\"关闭扫描--_scanStackInterval\");\n      clearInterval(this._scanStackIntervalId);\n    }\n  }\n  _queueSave(is) {\n    this._waitSendQueue.push(is);\n    this._scanWaitSendQqueue(CONFIG.queueTime);\n    if (_.localStorage) {\n      _.localStorage.set(\"_bp_wqueue\", JSON.stringify(this._waitSendQueue));\n    }\n  }\n  _stackSave(infoObj) {\n    this._infoStack.push(infoObj);\n    //检查信息栈是否已经满了\n    if (this._infoStack.length >= CONFIG.stackSize) {\n      // 如果已经满了 则送入待发送队列\n      this.stack2queue();\n    }\n  }\n  send() {\n    if (this._waitSendQueue.length == 0 || this._queueSending) {\n      return;\n    }\n\n    this._send();\n  }\n  /**\n   * 将队列的栈帧都间隔递归发送出去\n   */\n  _send() {\n    console.log(\"start send\");\n    console.log(\"waitSendQueue length=\" + this._waitSendQueue.length);\n    if (this._waitSendQueue.length == 0) {\n      console.log(\"关闭等待发送--_scanWaitSendQqueueInterval\");\n      clearInterval(this._scanWaitSendQqueueIntervalId);\n      this._queueSending = false;\n      return;\n    }\n\n    this._queueSending = true;\n    setTimeout(() => {\n      this.sendOldestStack();\n      this._send();\n    }, 500);\n  }\n\n  /**\n   * 收集的信息入栈\n   * @param infoObj\n   *\n   *  {\n   *      oc : //业务编码 opeCode\n   *      ac ：//行为编码 actionCode\n   *      v ：//行为结果 value 例如 输入框产生的值\n   *      ed:  //扩展信息 json\n   *  }\n   *\n   */\n  push(infoObj) {\n    if (infoObj) {\n      infoObj.dateTime = new Date().getTime();\n      console.log(infoObj);\n      this._scanStack(CONFIG.stackTime);\n      this._stackSave(infoObj);\n    }\n  }\n}\n\nexport default BPOINT;\n","import { _, console } from \"./utils\";\n\nclass INPUTLISTEN {\n  constructor(instance) {\n    this.instance = instance;\n  }\n  _addDomEventHandlers() {\n    try {\n      var rcidom = _.getPropsDom(document, \"data-sxf-props\");\n      rcidom.forEach(domItem => {\n        const eventItem = JSON.parse(domItem.getAttribute(\"data-sxf-props\"));\n        const eventType = eventItem.type;\n        const eventList = eventItem.eventList;\n        let data = {};\n        eventList.forEach(eventItem => {\n          _.register_event(\n            domItem,\n            eventItem.type,\n            e => {\n              if (eventType === \"input\") {\n                data = {\n                  input_value: e.target.value\n                };\n              }\n              this.instance[\"event\"].track(\n                `sxfData_${eventType}_${eventItem.type}`,\n                data\n              );\n            },\n            false,\n            true\n          );\n        });\n      });\n    } catch (error) {\n      console.error(\"自动添加监听事件失败,请校验语法是否有误！\");\n    }\n  }\n  bind(dom, kve) {\n    if (dom && kve) {\n      for (var k in kve) {\n        dom.addEventListener(k, kve[k]);\n      }\n\n      return dom;\n    }\n  }\n}\nexport default INPUTLISTEN;\n","import { CONFIG, DEFAULT_CONFIG } from \"./config\";\r\n\r\nimport { _, console } from \"./utils\";\r\n\r\n// 用户属性追踪\r\nimport USER_TRACK from \"./user_track\";\r\n// 用户事件追踪\r\nimport EVENT_TRACK from \"./event_track\";\r\n// 本地存储\r\nimport LOCAL_STORAGE from \"./local_storage\";\r\n// 单页面\r\nimport SPA from \"./spa\";\r\n// 渠道跟踪\r\n// import CHANNEL from \"./channel\";\r\n// 断点发送\r\nimport BPOINT from \"./bpoint_send\";\r\n// 远程拉取js文件（插件，具体内容请查看该文件）\r\n// import LOAD_CONTROL_JS from \"./load_control_js\";\r\n// 全面点\r\n// import { autotrack } from './autotrack';\r\n\r\nimport INPUTLISTEN from \"./input_listen\";\r\nclass SxfDataLib {\r\n  /**\r\n   *\r\n   * @param {String} token 上报数据凭证\r\n   * @param {Object} config sdk客户端配置\r\n   */\r\n  constructor() {}\r\n  init(token, config) {\r\n    if (this[\"__loaded\"]) {\r\n      return;\r\n    }\r\n    this[\"__loaded\"] = true;\r\n\r\n    this._ = _;\r\n    this[\"config\"] = {};\r\n    this._set_config(\r\n      _.extend({}, DEFAULT_CONFIG, CONFIG, config, {\r\n        token: token\r\n      })\r\n    );\r\n    this[\"local_storage\"] = new LOCAL_STORAGE(this[\"config\"]);\r\n    // 运行钩子函数\r\n    this._loaded();\r\n    // 实例化拉取远程库对象（按需加载）\r\n    // this[\"load_control_js\"] = new LOAD_CONTROL_JS(this);\r\n    // 实例化事件对象\r\n    this[\"event\"] = new EVENT_TRACK(this);\r\n    // 实例化用户对象\r\n    this[\"user\"] = new USER_TRACK(this);\r\n    // 实例化渠道跟踪对象\r\n    // this[\"channel\"] = new CHANNEL(this);\r\n\r\n    this[\"inputlisten\"] = new INPUTLISTEN(this);\r\n    // 断点发送对象\r\n    // 设置设备凭证\r\n    this._set_device_id();\r\n    // 开启是否断点发送\r\n    if (this._get_config(\"isBpoint\")) {\r\n      this[\"bpoint\"] = new BPOINT(this);\r\n      this[\"bpoint\"]._oldDataCheck();\r\n      this[\"bpoint\"]._scanStack(CONFIG.stackTime);\r\n    }\r\n\r\n    // 上报广告点击事件\r\n    // if (this[\"channel\"].check_ad_click()) {\r\n    //   this._ad_click();\r\n    // }\r\n\r\n    this._track_pv();\r\n    // this._autotrack();\r\n    // persistedTime 首次访问应用时间\r\n    this[\"local_storage\"].register_once(\r\n      { persistedTime: new Date().getTime() },\r\n      \"\"\r\n    );\r\n    // 单页面\r\n    if (this._get_config(\"SPA\").is) {\r\n      this._SPA();\r\n    }\r\n  }\r\n\r\n  // 广告点击事件\r\n  _ad_click() {\r\n    this.track_event(\"sxfData_ad_click\");\r\n  }\r\n  // 内部使用的PV方法\r\n  _track_pv(properties, callback) {\r\n    // 配置为自动触发PV事件\r\n    if (this._get_config(\"pageview\")) {\r\n      this[\"event\"].track_pv(properties, callback);\r\n    } else {\r\n      // 若没有自动触发事件，还需检测session (说明：当触发PV 时，实际已经检测了session)\r\n      this[\"event\"]._session();\r\n    }\r\n  }\r\n  // 单页面应用（影响PV）\r\n  _SPA() {\r\n    SPA.init({\r\n      mode: this._get_config(\"SPA\").mode,\r\n      callback_fn: () => {\r\n        this._track_pv();\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * 设置配置\r\n   * @param {Object} config\r\n   */\r\n  _set_config(config) {\r\n    if (_.isObject(config)) {\r\n      this[\"config\"] = _.extend(this[\"config\"], config);\r\n      CONFIG.DEBUG = CONFIG.DEBUG || this._get_config(\"debug\");\r\n      CONFIG.isBpoint = CONFIG.isBpoint || this._get_config(\"isBpoint\");\r\n    }\r\n  }\r\n  /**\r\n   * 获取某个配置\r\n   * @param {String} prop_name\r\n   * @returns {*}\r\n   */\r\n  _get_config(prop_name) {\r\n    return this[\"config\"][prop_name];\r\n  }\r\n  // sdk初始化之前触发的钩子函数，该方法必须在初始化子模块前以及上报数据前使用\r\n  _loaded() {\r\n    try {\r\n      this._get_config(\"loaded\")(this);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n  /**\r\n   * 设置本地设备凭证\r\n   * 若是首次访问（本地无设备凭证），上报用户首次访问网站事件\r\n   */\r\n  _set_device_id() {\r\n    let track_data = {};\r\n    if (!this.get_device_id()) {\r\n      this[\"local_storage\"].register_once({ deviceId: _.UUID() }, \"\");\r\n      track_data = this.track_event(\"sxfData_activate\");\r\n    }\r\n    return track_data;\r\n  }\r\n\r\n  // 获取唯一凭证（设备标记）\r\n  get_device_id() {\r\n    return this.get_property(\"deviceId\");\r\n  }\r\n  // 获取指定本地存储属性（缓存和本地）\r\n  get_property(prop_name) {\r\n    return this[\"local_storage\"][\"props\"][prop_name];\r\n  }\r\n  /**\r\n   * 设置一个指定事件的耗时监听器\r\n   * @param {String} event_name\r\n   */\r\n  // 监听事件\r\n  _addlisten(id) {\r\n    this[\"inputlisten\"]._addDomEventHandlers(id);\r\n  }\r\n  time_event(event_name) {\r\n    this[\"event\"].time_event(event_name);\r\n  }\r\n  /**\r\n   * 发送PV事件，在此之前检测session\r\n   * @param {Object} properties  pv属性\r\n   * @param {*} callback\r\n   */\r\n  track_pv(properties, callback) {\r\n    this[\"event\"].track_pv(properties, callback);\r\n  }\r\n  /**\r\n   * 追踪事件（上报用户事件触发数据）\r\n   * @param {String} event_name 事件名称（必须）\r\n   * @param {Object} properties 事件属性\r\n   * @param {Function} callback 上报后的回调方法\r\n   * @param {String} event_type 自定义事件类型\r\n   * @returns {Object} track_data 上报的数据\r\n   */\r\n  track_event(event_name, properties, callback, event_type) {\r\n    this[\"event\"].track(event_name, properties, callback, event_type);\r\n  }\r\n  /**\r\n   * 设置事件自定义通用属性\r\n   * 成功设置事件通用属性后，再通过 track_event: 追踪事件时，事件通用属性会被添加进每个事件中。\r\n   * 重复调用 register_event_super_properties: 会覆盖之前已设置的通用属性。\r\n   */\r\n  register_event_super_properties(prop, to) {\r\n    let set_props = {};\r\n    let super_properties = this.get_property(\"superProperties\");\r\n    if (_.isObject(prop)) {\r\n      _.each(prop, (v, k) => {\r\n        set_props[k] = v;\r\n      });\r\n    } else {\r\n      set_props[prop] = to;\r\n    }\r\n    // 注意合并顺序\r\n    super_properties = _.extend({}, super_properties, set_props);\r\n    this[\"local_storage\"].register({\r\n      superProperties: super_properties\r\n    });\r\n  }\r\n  /**\r\n   * 设置事件自定义通用属性\r\n   * 成功设置事件通用属性后，再通过 track_event: 追踪事件时，事件通用属性会被添加进每个事件中。\r\n   * 不覆盖之前已经设定的通用属性。\r\n   */\r\n  register_event_super_properties_once(prop, to) {\r\n    let set_props = {};\r\n    let super_properties = this.get_property(\"superProperties\");\r\n    if (_.isObject(prop)) {\r\n      _.each(prop, (v, k) => {\r\n        set_props[k] = v;\r\n      });\r\n    } else {\r\n      set_props[prop] = to;\r\n    }\r\n    // 注意合并顺序\r\n    super_properties = _.extend({}, set_props, super_properties);\r\n    this[\"local_storage\"].register({\r\n      superProperties: super_properties\r\n    });\r\n  }\r\n  /**\r\n   * 删除指定通用事件属性\r\n   * @param {String} prop_name\r\n   */\r\n  unregister_event_super_properties(prop_name) {\r\n    if (_.isString(prop_name)) {\r\n      let super_properties = this.get_property(\"superProperties\");\r\n      if (_.isObject(super_properties)) {\r\n        delete super_properties[prop_name];\r\n        this[\"local_storage\"].register({\r\n          superProperties: super_properties\r\n        });\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * 清除本地已设置的通用事件属性\r\n   */\r\n  clear_event_super_properties() {\r\n    this[\"local_storage\"].register({\r\n      superProperties: {}\r\n    });\r\n  }\r\n  /**\r\n   * 查看当前已设置的通用事件属性\r\n   */\r\n  current_event_super_properties() {\r\n    return this.get_property(\"superProperties\");\r\n  }\r\n  /**\r\n   * 用户登录和注册时调用\r\n   * @param {String} user_id\r\n   */\r\n  login(user_id) {\r\n    this[\"event\"].login(user_id);\r\n  }\r\n  // 清除本地用户信息，退出用户（选则调用）,建议平台网站不必调用（无需匿名用户的平台）\r\n  logout() {\r\n    this[\"event\"].logout();\r\n  }\r\n  //   _autotrack(){\r\n  //     autotrack.init(this);\r\n  //   }\r\n}\r\nlet sxfData = new SxfDataLib();\r\nif (sxf_Data_format === \"iife\") {\r\n  window.sxfData = sxfData;\r\n}\r\nexport default sxfData;\r\n"],"names":["win","userAgent","detector"],"mappings":"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"}